!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).AdFuel=e()}(function(){return function o(n,i,s){function a(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},n[t][0].call(r.exports,function(e){return a(n[t][1][e]||e)},r,r.exports,o,n,i,s)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AAdFuelModule=r.ModuleFlags=void 0;var l,u=e("./Logger"),d=e("./Consent"),c=e("./promiseWithTimeout"),p=e("./localization");(e=l=r.ModuleFlags||(r.ModuleFlags={}))[e.None=0]="None",e[e.EnableForDomestic=1]="EnableForDomestic",e[e.EnableForForeign=2]="EnableForForeign",e[e.RunWithoutAdFuel=4]="RunWithoutAdFuel",e[e.RunWithoutConsent=8]="RunWithoutConsent";Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e=o;function o(e,t,r,o,n,i,s){void 0===i&&(i=l.EnableForDomestic|l.EnableForForeign),void 0===s&&(s=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var a=this;this.config=e,this.MODULE_NAME=t,this.MODULE_VERSION=r,this.MODULE_LOG_TAG=o,this.logStyle=n,this.moduleFlags=i,this.consentTags=s,this.userConsent=new d.Consent,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var e=l.None;return(0,p.isIntl)()&&(e|=l.EnableForForeign),(0,p.isIntl)()||(e|=l.EnableForDomestic),(a.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic&&(a.moduleFlags&l.EnableForForeign)===l.EnableForForeign?e===(e&l.EnableForDomestic)||e===(e&l.EnableForForeign):(a.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic?e===(e&l.EnableForDomestic):e===(e&l.EnableForForeign)},this.callInit=function(){a.waitForUserConsent().then(function(){var e,t;a.userConsent.getConsent(a.consentTags)&&null!==(e=null===(e=window.AdFuelOptions)||void 0===e?void 0:e.ADFUEL.USER_CONSENT)&&void 0!==e&&e.ENABLED||null===(t=null===(t=window.AdFuelOptions)||void 0===t?void 0:t.ADFUEL.USER_CONSENT)||void 0===t||!t.ENABLED?a.waitForAdFuel().then(function(){(a.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?(a.logger.log("Waiting to register with AdFuel..."),document.addEventListener("AdFuelCreated",function(){var e;a.logger.log("Registering with AdFuel..."),null!==(e=window.AdFuel)&&void 0!==e&&e.registerModule(a)})):(a.logger.log("Registering with AdFuel..."),window.AdFuel.registerModule(a)),a.environmentMatchesFlags()?a.init().then(function(){var e;window.AdFuel?(a.logger.log("Setting Module Loaded..."),null!==(e=window.AdFuel)&&void 0!==e&&e.setModuleLoaded(a.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){var e;a.logger.log("Setting Module Loaded..."),null!==(e=window.AdFuel)&&void 0!==e&&e.setModuleLoaded(a.MODULE_LOG_TAG)})}):a.logger.warn("Not initializing ".concat(a.MODULE_NAME," for environmental reasons."),a.moduleFlags)}).catch(function(e){a.logger.warn("".concat(a.MODULE_NAME," errored waiting for AdFuel."),e)}):a.logger.info("User consent is not granted.",a.userConsent.getConsent(),null===(t=null===(t=window.AdFuelOptions)||void 0===t?void 0:t.ADFUEL.USER_CONSENT)||void 0===t?void 0:t.ENABLED)}).catch(function(e){a.logger.warn("".concat(a.MODULE_NAME," errored waiting for consent."),e)})},this.waitForAdFuel=function(){return(a.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(e){window.AdFuel?e():document.addEventListener("AdFuelCreated",function(){e()})}))},this.waitForUserConsent=function(){var e;return null===(e=window.WM)||void 0===e||!e.UserConsent||(a.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(e){var t;a.logger.log("UserConsent enabled:",null===(t=null===(t=null===(t=window.AdFuelOptions)||void 0===t?void 0:t.ADFUEL.USER_CONSENT)||void 0===t?void 0:t.ENABLED)||void 0===t||t),null===(t=null===(t=null===(t=window.AdFuelOptions)||void 0===t?void 0:t.ADFUEL.USER_CONSENT)||void 0===t?void 0:t.ENABLED)||void 0===t||t?a.userConsent.isReady?"ccpa"===a.userConsent.getUserConsentRegion||null!==(t=null===(t=null===(t=window.WM)||void 0===t?void 0:t.UserConsent)||void 0===t?void 0:t.isOptanonLoaded())&&void 0!==t&&t?e():document.addEventListener("optanonLoaded",function(){e()}):document.addEventListener("userConsentReady",function(){e()}):e()}))},this._logger=new u.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}r.AAdFuelModule=e},{"./Consent":2,"./Logger":4,"./localization":13,"./promiseWithTimeout":15}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Consent=void 0;var o=e("./Logger"),n=e("./CookieHelper"),s=e("./getUrlParam"),a=e("./Version"),e=(Object.defineProperty(i.prototype,"consentChecked",{get:function(){return this._consentChecked},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"consentStatus",{get:function(){return this._consentChecked},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getFullConsentState",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.getConsentState())&&void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getConsentVersion",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.getConsentVersion())&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getConsentString",{get:function(){var e,r="";return n.CookieHelper.hasCookie("eupubconsent")?(this._logger.log("Getting Consent Object from cookie..."),r=null!==(e=n.CookieHelper.readCookie("eupubconsent"))&&void 0!==e?e:""):"undefined"!=typeof window&&window.__tcfapi&&"function"==typeof window.__tcfapi?(this._logger.log("Getting Consent Object from __tcfapi..."),window.__tcfapi("getTCData",2,function(e,t){return t?(r=e.tcString,e.tcString):r=""})):"undefined"!=typeof window&&window.__cmp&&"function"==typeof window.__cmp&&(this._logger.log("Getting Consent Object from __cmp..."),window.__cmp("getVendorConsents",null,function(e){r=e.metadata})),this._logger.log("Returning consent string...",r),r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getUserConsentRegion",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.getRegion())&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getGDPRApplies",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.isInGdprRegion())&&void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getCCPAApplies",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.isInCcpaRegion())&&void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isReady",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.isReady())&&void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isInConsentRegion",{get:function(){return"ccpa"===this.getUserConsentRegion||"gdpr"===this.getUserConsentRegion},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getRegion",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.getRegion())&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isOptanonLoaded",{get:function(){var e;return null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.isOptanonLoaded())&&void 0!==e&&e},enumerable:!1,configurable:!0}),i);function i(e){void 0===e&&(e=!0);var i=this;this._version=new a.Version(1,0,0),this._logger=new o.Logger("Adfuel Consent",this._version.toString(),"consent","color: #FF5733; padding: 2px"),this._consentChecked=!1,this.getConsent=function(e){void 0===e&&(e=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var t="1.3.6";try{t=null!==(n=null===(o=null===(r=window.WM)||void 0===r?void 0:r.UserConsent)||void 0===o?void 0:o.getVersion())&&void 0!==n?n:"1.3.6"}catch(e){i._logger.warn("Running Older UserConsent - Please Update!")}var r=i.getUserConsentRegion,o=void 0!==window.__cmp,n=void 0!==window.__tcfapi;return o&&n&&i._logger.warn("****************************\n** Running multiple GDPR UserConsent frameworks.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),"ccpa"===r&&(o||n)&&i._logger.warn("****************************\n** Running GDPR UserConsent framework.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),"gdpr"!==r||o||n||i._logger.warn("****************************\n** Could not find GDPR UserConsent framework.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),i._logger.log("UserConsent Version: ",t),i._logger.log("Consent States: ",e),i._consentChecked=!window.WM||(null===(n=null===(n=window.WM)||void 0===n?void 0:n.UserConsent)||void 0===n||!n.isReady()||(2<=parseInt(t.split(".")[0])?window.WM.UserConsent.inUserConsentState(e):window.WM.UserConsent.inUserConsentState(["ads-general","ads-vendor"]))),i._logger.log("Consent Granted: ",i.consentStatus),"ccpa"===r&&""!==(0,s.getUrlParam)("renderStatic")&&(i._logger.log("Render Static: ",(0,s.getUrlParam)("renderStatic")),i._logger.log("Using override for Static Ad Rendering..."),i._consentChecked=!0),i._consentChecked=!0,i.consentStatus},e&&(this._logger.info("AdFuel Consent loaded."),this._logger.info("WM User Consent loaded: ".concat(!!window.WM)),this._logger.info("WM User Consent ready: ".concat(null!==(e=null===(e=null===(e=window.WM)||void 0===e?void 0:e.UserConsent)||void 0===e?void 0:e.isReady())&&void 0!==e&&e)))}r.Consent=e},{"./CookieHelper":3,"./Logger":4,"./Version":7,"./getUrlParam":9}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CookieHelper=void 0;var o=(n.hasCookie=function(e){return"undefined"!=typeof window&&(!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+e+"=")||0===document.cookie.indexOf(e+"=")))},n.setCookie=function(e){var t=e.cookieName+"="+e.cookieValue+";";e.attributes.forEach(function(e){t+=" "+e.key+"="+e.value+";"}),e.secure&&(t+=" Secure"),document.cookie=t},n.readCookie=function(e){var t,r,o=!1,n=null;return(o="undefined"!=typeof localStorage?!0:o)&&(n=localStorage.getItem(e)),o&&null!==n||(r=(t=e).length+1,n="undefined"!=typeof document&&document.cookie&&document.cookie.split(";").map(function(e){return e.trim()}).filter(function(e){return e.substring(0,r)==="".concat(t,"=")}).map(function(e){return decodeURIComponent(e.substring(r))})[0]||null),n},n);function n(){}r.CookieHelper=o},{}],4:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=r.LogLevel=void 0,(o=n=r.LogLevel||(r.LogLevel={})).Info="background: green;color: white;",o.Warning="background: orange;color: black",o.Error="background: red;color:white";var o=(Object.defineProperty(i.prototype,"isDebugging",{get:function(){var e;return void 0===this._debug&&(e=this.getUrlParam("debug").split(","),this._debug="true"===e[0]||0<=e.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),i.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},i.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},i.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},i.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},i.prototype.groupStart=function(e){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(e," - START -----"),this._normalStyle))},i.prototype.groupEnd=function(e){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},i.prototype.timeStart=function(e){var t="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(e);this.groupStart(e),console.time(t)},i.prototype.timeEnd=function(e){var t="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(e);this.groupEnd(e),console.timeEnd(t)},i.prototype.getUrlParam=function(e){if("undefined"==typeof document)return"";e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+e+"=([^&#]*)");if(document&&document.location&&document.location.search){e=e.exec(document.location.search);return e?e[1]:""}return""},i);function i(e,t,r,o){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=e||"",this._moduleVersion=t||"",this._logKey=r||(null==e?void 0:e.toLowerCase())||"",this._normalStyle=o||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),n.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),n.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),n.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),n.Info,this._normalStyle))}r.Logger=o},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Performance=void 0;var o=(n.prototype.addMark=function(e){"undefined"!=typeof window&&window.performance.mark("[".concat(this._tag,"] ").concat(e))},n.prototype.addMeasure=function(e){"undefined"!=typeof window&&window.performance.measure("[".concat(this._tag,"] ").concat(e),"[".concat(this._tag,"] ").concat(e," START"),"[".concat(this._tag,"] ").concat(e," END"))},n.prototype.getMarks=function(){var e,t=this;return null!==(e=null===window||void 0===window?void 0:window.performance.getEntriesByType("mark").filter(function(e){return e.name.indexOf("[".concat(t._tag,"] "))}))&&void 0!==e?e:[]},n.prototype.getMeasures=function(){var e,t=this;return null!==(e=null===window||void 0===window?void 0:window.performance.getEntriesByType("measure").filter(function(e){return e.name.indexOf("[".concat(t._tag,"] "))}))&&void 0!==e?e:[]},n);function n(e){this._tag="ADFUEL",this._tag=e,this.addMark("AdFuel Load START")}r.Performance=o},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PiiFilter=void 0;var o=(n.prototype.presentInQueryString=function(){if(document.location.search){var t=document.location.search.search(this.re)+1,r=void 0;try{r=decodeURIComponent(document.location.search).search(this.re)+1}catch(e){r=t}return 1===t||1===r}return!1},n.prototype.presentInHash=function(){if(document.location.hash){var t=document.location.hash.search(this.re)+1,r=void 0;try{r=decodeURIComponent(document.location.hash).search(this.re)+1}catch(e){r=t}return t||r}return!1},n.prototype.presentInReferrer=function(){if(document.referrer){var t=document.referrer.search(this.re)+1,r=void 0;try{r=decodeURIComponent(document.location.referrer).search(this.re)+1}catch(e){r=t}return t||r}return!1},n.prototype.filterDFPRequest=function(){if(this.presentInQueryString()||this.presentInHash()||this.presentInReferrer()){if("undefined"!=typeof window&&window.AdFuel){this.logger.log("Filtering DFP Request due to PII in query string.");for(var e=Object.getOwnPropertyNames(window.AdFuel),t=0;t<e.length;t++);window.googletag=null}return!0}return!1},Object.defineProperty(n.prototype,"qs",{get:function(){return this.presentInQueryString},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this.presentInHash},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ref",{get:function(){return this.presentInReferrer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isPIIPresent",{get:function(){return this.present},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"filter",{get:function(){return this.filterDFPRequest},enumerable:!1,configurable:!0}),n);function n(e){var t=this;this.logger=e,this.re=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\[\]\.,;:\s@\"]+\.)+[^<>()\[\]\.,;:\s@\"]{2,})/i,this.present=function(){return t.presentInQueryString()||t.presentInHash()||t.presentInReferrer()}}r.PiiFilter=o},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Version=void 0;var o=(Object.defineProperty(n.prototype,"major",{get:function(){var e;return null!==(e=this.setMajorTo)&&void 0!==e?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minor",{get:function(){var e;return null!==(e=this.setMinorTo)&&void 0!==e?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"revision",{get:function(){var e;return null!==(e=this.setRevisionTo)&&void 0!==e?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"family",{get:function(){var e;return null!==(e=this.setFamilyTo)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),n);function n(e,t,r,o){var n=this;this.setMajorTo=e,this.setMinorTo=t,this.setRevisionTo=r,this.setFamilyTo=o,this.setfamily=function(e){return n.setFamilyTo=e,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}r.Version=o},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateCacheBuster=void 0,r.generateCacheBuster=function(){for(var e="",t=0;t<10;t++)e+=Math.floor(9*Math.random()).toString();return e}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUrlParam=void 0,r.getUrlParam=function(e){if("undefined"==typeof document)return"";if(e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+e+"=([^&#]*)"),document&&document.location&&document.location.search){e=e.exec(document.location.search);return e?e[1]:""}return""}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasVideo=void 0,r.hasVideo=function(){var e=document.getElementsByTagName("video"),t=document.getElementsByClassName("fave-wrapper"),r=document.getElementsByClassName("top-container");return!!e.length||!!t.length||!!r.length}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waitForVideo=r.Version=r.PiiFilter=r.Performance=r.toString=r.setHostAndPathNames=r.selectedEdition=r.promiseWithTimeout=r.normalizeUrl=r.noop=r.ModuleFlags=r.MODULE_LOG_TAG=r.MODULE_VERSION=r.MODULE_NAME=r.Logger=r.locationServiceURL=r.loadScriptFromUrl=r.isUSCNN=r.isIntl=r.hasVideo=r.hasUserConsent=r.getUrlParam=r.generateCacheBuster=r.countryCode=r.CookieHelper=r.Consent=r.AAdFuelModule=void 0;var o=e("./AAdFuelModule");Object.defineProperty(r,"AAdFuelModule",{enumerable:!0,get:function(){return o.AAdFuelModule}}),Object.defineProperty(r,"ModuleFlags",{enumerable:!0,get:function(){return o.ModuleFlags}});var n=e("./Consent");Object.defineProperty(r,"Consent",{enumerable:!0,get:function(){return n.Consent}});var i=e("./CookieHelper");Object.defineProperty(r,"CookieHelper",{enumerable:!0,get:function(){return i.CookieHelper}});var s=e("./getUrlParam");Object.defineProperty(r,"getUrlParam",{enumerable:!0,get:function(){return s.getUrlParam}});var a=e("./hasVideo");Object.defineProperty(r,"hasVideo",{enumerable:!0,get:function(){return a.hasVideo}});var l=e("./localization");Object.defineProperty(r,"isIntl",{enumerable:!0,get:function(){return l.isIntl}}),Object.defineProperty(r,"isUSCNN",{enumerable:!0,get:function(){return l.isUSCNN}});var u=e("./loadScriptFromUrl");Object.defineProperty(r,"loadScriptFromUrl",{enumerable:!0,get:function(){return u.loadScriptFromUrl}});var d=e("./Logger");Object.defineProperty(r,"Logger",{enumerable:!0,get:function(){return d.Logger}});var c=e("./normalizeUrl");Object.defineProperty(r,"normalizeUrl",{enumerable:!0,get:function(){return c.normalizeUrl}});var p=e("./promiseWithTimeout");Object.defineProperty(r,"promiseWithTimeout",{enumerable:!0,get:function(){return p.promiseWithTimeout}});var g=e("./Performance");Object.defineProperty(r,"Performance",{enumerable:!0,get:function(){return g.Performance}});var h=e("./PiiFilter");Object.defineProperty(r,"PiiFilter",{enumerable:!0,get:function(){return h.PiiFilter}});var f=e("./setHostAndPathNames");Object.defineProperty(r,"setHostAndPathNames",{enumerable:!0,get:function(){return f.setHostAndPathNames}});var v=e("./generateCacheBuster");Object.defineProperty(r,"generateCacheBuster",{enumerable:!0,get:function(){return v.generateCacheBuster}});var y=e("./variables");Object.defineProperty(r,"MODULE_VERSION",{enumerable:!0,get:function(){return y.MODULE_VERSION}}),Object.defineProperty(r,"MODULE_NAME",{enumerable:!0,get:function(){return y.MODULE_NAME}}),Object.defineProperty(r,"MODULE_LOG_TAG",{enumerable:!0,get:function(){return y.MODULE_LOG_TAG}}),Object.defineProperty(r,"toString",{enumerable:!0,get:function(){return y.toString}}),Object.defineProperty(r,"noop",{enumerable:!0,get:function(){return y.noop}}),Object.defineProperty(r,"countryCode",{enumerable:!0,get:function(){return y.countryCode}}),Object.defineProperty(r,"locationServiceURL",{enumerable:!0,get:function(){return y.locationServiceURL}}),Object.defineProperty(r,"selectedEdition",{enumerable:!0,get:function(){return y.selectedEdition}}),Object.defineProperty(r,"hasUserConsent",{enumerable:!0,get:function(){return y.hasUserConsent}});var m=e("./Version");Object.defineProperty(r,"Version",{enumerable:!0,get:function(){return m.Version}});var b=e("./waitForVideo");Object.defineProperty(r,"waitForVideo",{enumerable:!0,get:function(){return b.waitForVideo}})},{"./AAdFuelModule":1,"./Consent":2,"./CookieHelper":3,"./Logger":4,"./Performance":5,"./PiiFilter":6,"./Version":7,"./generateCacheBuster":8,"./getUrlParam":9,"./hasVideo":10,"./loadScriptFromUrl":12,"./localization":13,"./normalizeUrl":14,"./promiseWithTimeout":15,"./setHostAndPathNames":16,"./variables":17,"./waitForVideo":18}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadScriptFromUrl=void 0;var o=e("./promiseWithTimeout");r.loadScriptFromUrl=function(a,l,u){return void 0===u&&(u=document),(0,o.promiseWithTimeout)(5e3,new Promise(function(e,t){var r,o,n=u.createElement("script");if(document.getElementById(l))t("Element name ".concat(l," already exists in the document."));else try{var i="";i=1<a.split("//").length?a:(null!==(o="https:"===(null===(r=u.location)||void 0===r?void 0:r.protocol))&&o?"https://":"http://").concat(a);var s=u.getElementsByTagName("script")[0];if(n.id=l,n.type="text/javascript",n.src=i,n.addEventListener("load",function(){e(n)}),null==s||!s.parentNode)throw new Error("Could not insert script.");s.parentNode.insertBefore(n,s)}catch(e){console.log("Error in loading script from ".concat(n.src),e),t(e)}}))}},{"./promiseWithTimeout":15}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setIsUSCNN=r.setIsIntl=r.isUSCNN=r.isIntl=void 0;var o=e("./setHostAndPathNames"),n=e("./getUrlParam"),i=e("./Logger"),s=e("./variables"),a=new i.Logger(s.MODULE_NAME,s.MODULE_VERSION.toString(),s.MODULE_LOG_TAG,"color: coral; padding: 2px"),l=!1,u=!1;r.isIntl=function(){var e=!1,t=(0,o.setHostAndPathNames)();return"true"===(0,n.getUrlParam)("isIntl")?(l||(l=!0,a.log("Faking international site. Using International PubIds.")),e=!0):0<=t.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(l||(l=!0,a.log("Full international site. Using International PubIds.")),e=!0):""===s.countryCode||null===s.countryCode?(l||(l=!0,a.log("No country code.")),e=!1):"US"!==s.countryCode&&"CA"!==s.countryCode?0<=t.search(/^.*(money|\.cnn)\./)?(0<=t.search(/^.*us\.cnn\.com/)&&(l||a.log("International user but domestic page.  Using alternate international PubIds if available."),u=!0),l||(l=!0,a.log("International country code.")),e=!0):0<=t.search(/^.*us\.cnn\.com/)?(l||(l=!0,a.log("International user but domestic page. Using alternate international PubIds if available.")),u=e=!0):(l||(l=!0,a.log("International country code but domestic site.")),e=!0):l||(l=!0,a.log("Domestic site or country code."),e=!1),e};r.isUSCNN=function(){return(0,r.isIntl)(),a.log("Is User on US.CNN.COM? ",u),u},r.setIsIntl=r.isIntl,r.setIsUSCNN=r.isUSCNN},{"./Logger":4,"./getUrlParam":9,"./setHostAndPathNames":16,"./variables":17}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeUrl=void 0,r.normalizeUrl=function(e){var t=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,normalizeHttp:!0,stripFragment:!0,stripWWW:!0,removeQueryParameters:!0,removeTrailingSlash:!1,removeDirectoryIndex:!1},{}),r=e.trim(),o="/"===e[0]&&"/"===e[1];!o&&/^\.*\//.test(e)||(r=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,"http://"));var n=document.createElement("a");if(n.href=r,t.normalizeHttps&&t.normalizeHttp)throw new Error("The `normalizeHttp` and `normalizeHttps` options cannot be used together");return t.normalizeHttp&&("http:"===n.protocol||o)&&(n.protocol="https:"),t.normalizeHttps&&("https:"===n.protocol||o)&&(n.protocol="http:"),t.stripFragment&&(n.hash=""),n.pathname&&(n.pathname=n.pathname.replace(/((?![https?:]).)\/{2,}/g,function(e,t){return/^(?!\/)/g.test(t)?t+"/":"/"})),n.pathname&&(n.pathname=decodeURI(n.pathname)),n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&(n.hostname=n.hostname.replace(/^www\./,""))),t.removeQueryParameters&&(n.search=""),r=n.href,!t.removeTrailingSlash&&"/"!==n.pathname||(r=e.replace(/\/$/,"")),r=o&&!t.normalizeProtocol?e.replace(/^http:\/\//,"//"):r}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.promiseWithTimeout=void 0,r.promiseWithTimeout=function(r,e,o){void 0===o&&(o="The promise timed out.");var t=new Promise(function(e,t){setTimeout(function(){clearTimeout(),t(o)},r)});return Promise.race([e,t])}},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setHostAndPathNames=void 0;r.setHostAndPathNames=function(){var e="undefined"!=typeof document?document.createElement("a"):{href:"",hostname:"",pathname:""};return e.href="undefined"!=typeof document?document.location.href:"",e.hostname}},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasUserConsent=r.selectedEdition=r.locationServiceURL=r.countryCode=r.noop=r.toString=r.MODULE_LOG_TAG=r.MODULE_VERSION=r.MODULE_NAME=void 0;var o=e("./Version"),n=e("./CookieHelper"),e=Object.prototype;r.MODULE_NAME="Ad Utilities",r.MODULE_VERSION=new o.Version(1,0,0,"TS"),r.MODULE_LOG_TAG="utils",r.toString=e.toString;r.noop=function(){},r.countryCode=n.CookieHelper.readCookie("countryCode")||(null!==(e=null===(e=n.CookieHelper.readCookie("CG"))||void 0===e?void 0:e.substr(0,2))&&void 0!==e?e:"");r.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",r.selectedEdition=null!==(n=n.CookieHelper.readCookie("SelectedEdition"))&&void 0!==n?n:"www",r.hasUserConsent="undefined"!=typeof window&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":3,"./Version":7}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waitForVideo=void 0;r.waitForVideo=function(n){var i=!1,s=new MutationObserver(function(e){var t=document.getElementsByTagName("video"),r=document.getElementsByClassName("fave-wrapper"),o=document.getElementsByClassName("top-container");(t.length||r.length||o.length)&&(i||n(),i=!0,s.disconnect())});s.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0});var e=document.getElementsByTagName("video"),t=document.getElementsByClassName("fave-wrapper"),r=document.getElementsByClassName("top-container");(e.length||t.length||r.length)&&(n(),i=!0,s.disconnect())}},{}],19:[function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=e("./Enumerables"),s=e("./Comparers"),a=(l.prototype.toList=function(){return new p(this.toArray())},l.prototype.toDictionary=function(e,t){return y.fromArray(this.toArray(),e,t)},l.prototype.reverse=function(){return new i.ReverseEnumerable(this.asEnumerable())},l.prototype.concat=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(t=this.asEnumerable()).concat.apply(t,[e].concat(r))},l.prototype.contains=function(t){return this.any(function(e){return e===t})},l.prototype.where=function(e){return new i.ConditionalEnumerable(this.asEnumerable(),e)},l.prototype.select=function(e){return new i.TransformEnumerable(this.asEnumerable(),e)},l.prototype.selectMany=function(t){return this.select(function(e){e=t(e);return e instanceof Array?new i.ArrayEnumerable(e):e.asEnumerable()}).toArray().reduce(function(e,t){return new i.ConcatEnumerable(e,t)},i.Enumerable.empty())},l.prototype.elementAt=function(e){e=this.elementAtOrDefault(e);if(void 0===e)throw new Error("Out of bounds");return e},l.prototype.except=function(e){return this.asEnumerable().except(e)},l.prototype.first=function(e){e=void 0!==e?this.firstOrDefault(e):this.firstOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},l.prototype.groupBy=function(e,t){for(var r=this.toArray(),o=new y,n=0;n<r.length;++n){var i=e(r[n]),s=void 0!==t?t(r[n]):r[n];o.containsKey(i)||o.set(i,new p),o.get(i).push(s)}return o.asEnumerable()},l.prototype.last=function(e){e=void 0!==e?this.lastOrDefault(e):this.lastOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},l.prototype.single=function(e){e=void 0!==e?this.singleOrDefault(e):this.singleOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},l.prototype.singleOrDefault=function(e){return void 0!==e?this.asEnumerable().singleOrDefault(e):this.asEnumerable().singleOrDefault()},l.prototype.skipWhile=function(e){return this.asEnumerable().skipWhile(e)},l.prototype.takeWhile=function(e){return this.asEnumerable().takeWhile(e)},l.prototype.sequenceEqual=function(e,t){return void 0!==t?this.asEnumerable().sequenceEqual(e,t):this.asEnumerable().sequenceEqual(e)},l.prototype.distinct=function(e){return new i.UniqueEnumerable(this.asEnumerable(),e)},l.prototype.min=function(e){return void 0!==e?new i.TransformEnumerable(this.asEnumerable(),e).min():this.aggregate(function(e,t){return void 0!==e&&e<t?e:t})},l.prototype.orderBy=function(e,t){return new i.OrderedEnumerable(this.asEnumerable(),s.createComparer(e,!0,t))},l.prototype.orderByDescending=function(e){return new i.OrderedEnumerable(this.asEnumerable(),s.createComparer(e,!1,void 0))},l.prototype.max=function(e){return void 0!==e?new i.TransformEnumerable(this.asEnumerable(),e).max():this.aggregate(function(e,t){return void 0!==e&&t<e?e:t})},l.prototype.sum=function(r){return this.aggregate(function(e,t){return e+r(t)},0)},l.prototype.skip=function(e){return new i.RangeEnumerable(this.asEnumerable(),e,void 0)},l.prototype.take=function(e){return new i.RangeEnumerable(this.asEnumerable(),void 0,e)},l.prototype.union=function(e){return new i.UniqueEnumerable(this.concat(e))},l.prototype.aggregate=function(e,t){return void 0!==t?this.asEnumerable().aggregate(e,t):this.asEnumerable().aggregate(e)},l.prototype.any=function(e){return void 0!==e?this.asEnumerable().any(e):this.asEnumerable().any()},l.prototype.all=function(e){return this.asEnumerable().all(e)},l.prototype.average=function(e){return this.asEnumerable().average(e)},l.prototype.count=function(e){return void 0!==e?this.asEnumerable().count(e):this.asEnumerable().count()},l.prototype.elementAtOrDefault=function(e){return this.asEnumerable().elementAtOrDefault(e)},l.prototype.firstOrDefault=function(e){return void 0!==e?this.asEnumerable().firstOrDefault(e):this.asEnumerable().firstOrDefault()},l.prototype.lastOrDefault=function(e){return void 0!==e?this.asEnumerable().lastOrDefault(e):this.asEnumerable().lastOrDefault()},l.prototype.forEach=function(e){return this.asEnumerable().forEach(e)},l.prototype.defaultIfEmpty=function(e){return void 0!==e?this.asEnumerable().defaultIfEmpty(e):this.asEnumerable().defaultIfEmpty()},l.prototype.zip=function(e,t){return this.asEnumerable().zip(e,t)},l);function l(){}r.EnumerableCollection=a;var u,e=(n(d,u=a),d.prototype.asArray=function(){return this.source},d.prototype.toArray=function(){return[].concat(this.source)},d.prototype.toList=function(){return new p(this.toArray())},d.prototype.asEnumerable=function(){return new i.ArrayEnumerable(this.source)},d.prototype.aggregate=function(e,t){return void 0!==t?this.source.reduce(e,t):this.source.reduce(e)},d.prototype.any=function(e){return void 0!==e?this.source.some(e):0<this.source.length},d.prototype.all=function(e){return this.source.every(e)},d.prototype.average=function(e){if(0===this.count())throw new Error("Sequence contains no elements");for(var t=0,r=0,o=this.source.length;r<o;++r)t+=e(this.source[r]);return t/this.source.length},d.prototype.count=function(e){return(void 0!==e?this.source.filter(e):this.source).length},d.prototype.elementAtOrDefault=function(e){if(e<0)throw new Error("Negative index is forbiden");return this.source[e]},d.prototype.firstOrDefault=function(e){return(void 0!==e?this.source.filter(e):this.source)[0]},d.prototype.groupBy=function(e,t){for(var r=this.asArray(),o=new y,n=0;n<r.length;++n){var i=e(r[n]),s=void 0!==t?t(r[n]):r[n];o.containsKey(i)||o.set(i,new p),o.get(i).push(s)}return o.asEnumerable()},d.prototype.lastOrDefault=function(e){if(void 0===e)return this.source[this.source.length-1];e=this.source.filter(e);return e[e.length-1]},d.prototype.forEach=function(e){for(var t=0,r=this.source.length;t<r;++t)e(this.source[t],t)},d.prototype.sequenceEqual=function(e,t){if(void 0===t&&(t=s.strictEqualityComparer()),e instanceof d||e instanceof Array){var r=this.asArray(),o=e instanceof d?e.asArray():e;if(r.length!=o.length)return!1;for(var n=0;n<r.length;++n)if(!t(r[n],o[n]))return!1;return!0}return this.asEnumerable().sequenceEqual(e,t)},d);function d(e){void 0===e&&(e=[]);var t=u.call(this)||this;return t.source=e,t}r.ArrayQueryable=e;var c,p=(n(g,c=e),g.prototype.copy=function(){return new g(this.toArray())},g.prototype.asReadOnly=function(){return this},g.prototype.clear=function(){this.source=[]},g.prototype.remove=function(e){for(var t=[],r=0,o=this.source.length;r<o;++r)this.source[r]!==e&&t.push(this.source[r]);this.source=t},g.prototype.removeAt=function(e){if(e<0||void 0===this.source[e])throw new Error("Out of bounds");return this.source.splice(e,1)[0]},g.prototype.get=function(e){return this.source[e]},g.prototype.push=function(e){return this.source.push(e)},g.prototype.pushRange=function(e){return e instanceof Array||(e=e.toArray()),this.source.push.apply(this.source,e)},g.prototype.pushFront=function(e){return this.source.unshift(e)},g.prototype.pop=function(){return this.source.pop()},g.prototype.popFront=function(){return this.source.shift()},g.prototype.set=function(e,t){if(e<0)throw new Error("Out of bounds");this.source[e]=t},g.prototype.insert=function(e,t){if(e<0||e>this.source.length)throw new Error("Out of bounds");this.source.splice(e,0,t)},g.prototype.indexOf=function(e){return this.source.indexOf(e)},g);function g(){return null!==c&&c.apply(this,arguments)||this}r.List=p;var h,e=(n(f,h=e),f.prototype.copy=function(){return new f(this.toArray())},f.prototype.clear=function(){this.source=[]},f.prototype.peek=function(){return this.source[this.source.length-1]},f.prototype.pop=function(){return this.source.pop()},f.prototype.push=function(e){return this.source.push(e)},f);function f(){return null!==h&&h.apply(this,arguments)||this}r.Stack=e;var v,y=(n(m,v=a),m.fromArray=function(e,t,r){return new m(e.map(function(e){return{key:t(e),value:r(e)}}))},m.fromJsObject=function(t){return new m(new p(Object.getOwnPropertyNames(t)).select(function(e){return{key:e,value:t[e]}}).toArray())},m.prototype.copy=function(){return new m(this.toArray())},m.prototype.asReadOnly=function(){return this},m.prototype.asEnumerable=function(){return new i.ArrayEnumerable(this.toArray())},m.prototype.toArray=function(){var t=this;return this.getKeys().select(function(e){return{key:e,value:t.dictionary[e]}}).toArray()},m.prototype.clear=function(){this.dictionary={}},m.prototype.containsKey=function(e){return this.dictionary.hasOwnProperty(e)},m.prototype.containsValue=function(e){for(var t=this.getKeysFast(),r=0;r<t.length;++r)if(this.dictionary[t[r]]===e)return!0;return!1},m.prototype.getKeys=function(){var t=this,e=this.getKeysFast();return new p(e.map(function(e){return"number"===t.keyType?parseFloat(e):e}))},m.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},m.prototype.getValues=function(){for(var e=this.getKeysFast(),t=new Array(e.length),r=0;r<e.length;++r)t[r]=this.dictionary[e[r]];return new p(t)},m.prototype.remove=function(e){this.containsKey(e)&&delete this.dictionary[e]},m.prototype.get=function(e){if(!this.containsKey(e))throw new Error("Key doesn't exist: "+e);return this.dictionary[e]},m.prototype.set=function(e,t){if(this.containsKey(e))throw new Error("Key already exists: "+e);this.setOrUpdate(e,t)},m.prototype.setOrUpdate=function(e,t){void 0===this.keyType&&(this.keyType=typeof e),this.dictionary[e]=t},m);function m(e){var t=v.call(this)||this;if(t.clear(),void 0!==e)for(var r=0;r<e.length;++r){var o=e[r];t.set(o.key,o.value)}return t}r.Dictionary=y},{"./Comparers":20,"./Enumerables":21}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.strictEqualityComparer=function(){return function(e,t){return e===t}},r.combineComparers=function(r,o){return function(e,t){return r(e,t)||o(e,t)}},r.createComparer=function(r,e,o){return void 0!==o?function(e,t){return o(r(e),r(t))}:e?function(e,t){e=r(e),t=r(t);return e<t?-1:t<e?1:0}:function(e,t){e=r(e),t=r(t);return e<t?1:t<e?-1:0}}},{}],21:[function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=e("./Iterators"),s=e("./Comparers"),a=e("./Collections"),l=e("./Utils"),e=(u.prototype.reset=function(){this.source.reset()},u.prototype.next=function(){return this.source.next()},u.prototype.asEnumerable=function(){return this},u.prototype.toArray=function(){var e=[];for(this.reset();this.next();)e.push(this.value());return e},u.prototype.toList=function(){return new a.List(this.toArray())},u.prototype.toDictionary=function(e,t){return a.Dictionary.fromArray(this.toArray(),e,t)},u.prototype.count=function(e){if(void 0!==e)return new h(this,e).count();var t=0;for(this.reset();this.next();)++t;return t>>>0},u.prototype.any=function(e){return void 0!==e?new h(this,e).any():(this.reset(),this.next())},u.prototype.all=function(e){for(this.reset();this.next();)if(!e(this.value()))return!1;return!0},u.prototype.reverse=function(){return new x(this.copy())},u.prototype.contains=function(t){return this.any(function(e){return e===t})},u.prototype.sequenceEqual=function(e,t){void 0===t&&(t=s.strictEqualityComparer());var r=e instanceof Array?new W(e):e.asEnumerable();for(this.reset(),r.reset();this.next();)if(!r.next()||!t(this.value(),r.value()))return!1;return!r.next()},u.prototype.where=function(e){return new h(this.copy(),e)},u.prototype.select=function(e){return new D(this.copy(),e)},u.prototype.selectMany=function(t){return this.select(function(e){e=t(e);return Array.isArray(e)?new W(e):e.asEnumerable()}).toArray().reduce(function(e,t){return new S(e,t)},c.empty())},u.prototype.skipWhile=function(e){return new y(this.copy(),e)},u.prototype.concat=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o=function(e){return e instanceof Array?new W(e):e.asEnumerable()},n=new S(this.copy(),o(e).copy()),i=0,s=t.length;i<s;++i)n=new S(n,o(t[i]).copy());return n},u.prototype.defaultIfEmpty=function(e){return new G(this,e)},u.prototype.elementAt=function(e){e=this.elementAtOrDefault(e);if(void 0===e)throw new Error("Out of bounds");return e},u.prototype.elementAtOrDefault=function(e){if(e<0)throw new Error("Negative index is forbiden");this.reset();for(var t=-1;this.next()&&++t!==e;);if(t===e)return this.value()},u.prototype.except=function(t){return this.where(function(e){return!t.contains(e)})},u.prototype.first=function(e){e=void 0!==e?this.firstOrDefault(e):this.firstOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},u.prototype.firstOrDefault=function(e){return void 0!==e?new h(this,e).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},u.prototype.forEach=function(e){this.reset();for(var t=0;this.next();++t)e(this.value(),t)},u.prototype.groupBy=function(e,t){for(var r=this.toArray(),o=new a.Dictionary,n=0;n<r.length;++n){var i=e(r[n]),s=void 0!==t?t(r[n]):r[n];o.containsKey(i)||o.set(i,new a.List),o.get(i).push(s)}return o.asEnumerable()},u.prototype.last=function(e){e=void 0!==e?this.lastOrDefault(e):this.lastOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},u.prototype.lastOrDefault=function(e){if(void 0!==e)return new h(this,e).lastOrDefault();e=new x(this);return e.reset(),e.next()?e.value():void 0},u.prototype.single=function(e){e=void 0!==e?this.singleOrDefault(e):this.singleOrDefault();if(void 0===e)throw new Error("Sequence contains no elements");return e},u.prototype.singleOrDefault=function(e){if(void 0!==e)return new h(this,e).singleOrDefault();if(this.reset(),this.next()){e=this.value();if(this.next())throw new Error("Sequence contains more than 1 element");return e}},u.prototype.distinct=function(e){return new A(this.copy(),e)},u.prototype.aggregate=function(e,t){var r=t;if(this.reset(),void 0===t){if(!this.next())throw new Error("Sequence contains no elements");r=e(r,this.value())}for(;this.next();)r=e(r,this.value());return r},u.prototype.min=function(e){return void 0!==e?new D(this,e).min():this.aggregate(function(e,t){return void 0!==e&&e<t?e:t})},u.prototype.orderBy=function(e,t){return new k(this.copy(),s.createComparer(e,!0,t))},u.prototype.orderByDescending=function(e){return new k(this.copy(),s.createComparer(e,!1,void 0))},u.prototype.max=function(e){return void 0!==e?new D(this,e).max():this.aggregate(function(e,t){return void 0!==e&&t<e?e:t})},u.prototype.sum=function(r){return this.aggregate(function(e,t){return e+r(t)},0)},u.prototype.average=function(e){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");for(var t=0,r=0;t+=e(this.value()),++r,this.next(););return t/r},u.prototype.skip=function(e){return new L(this.copy(),e,void 0)},u.prototype.take=function(e){return new L(this.copy(),void 0,e)},u.prototype.takeWhile=function(e){return new w(this.copy(),e)},u.prototype.union=function(e){return new A(this.concat(e))},u.prototype.zip=function(e,t){e=e instanceof Array?new W(e):e.asEnumerable();return new Q(this,e,t)},u);function u(e){this.source=e}r.EnumerableBase=e;var d,c=(n(p,d=e),p.fromSource=function(e){return new(e instanceof Array?W:p)(e)},p.empty=function(){return p.fromSource([])},p.range=function(e,t,r){if(void 0===r&&(r=!0),t<0)throw new Error("Count must be >= 0");var o=new Array(t);if(r)for(var n=0;n<t;o[n]=e+n++);else for(n=0;n<t;o[n]=e-n++);return new W(o)},p.repeat=function(e,t){if(t<0)throw new Error("Count must me >= 0");for(var r=new Array(t),o=0;o<t;++o)r[o]=e;return new W(r)},p.prototype.copy=function(){return new p(this.source.copy())},p.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},p.prototype.reset=function(){d.prototype.reset.call(this),this.currentValue.invalidate()},p.prototype.next=function(){return this.currentValue.invalidate(),d.prototype.next.call(this)},p);function p(e){e=d.call(this,e)||this;return e.currentValue=new l.Cached,e}r.Enumerable=c;var g,h=(n(f,g=c),f.prototype.copy=function(){return new f(this.source.copy(),this._predicate)},f.prototype.next=function(){for(var e;(e=g.prototype.next.call(this))&&!this._predicate(this.value()););return e},f);function f(e,t){e=g.call(this,e)||this;return e._predicate=t,e}r.ConditionalEnumerable=h;var v,y=(n(m,v=c),m.prototype.reset=function(){v.prototype.reset.call(this),this._shouldContinueChecking=!0},m.prototype.copy=function(){return new m(this.source.copy(),this._predicate)},m.prototype.next=function(){if(!this._shouldContinueChecking)return v.prototype.next.call(this);for(var e;(e=v.prototype.next.call(this))&&this._predicate(this.value()););return this._shouldContinueChecking=!1,e},m);function m(e,t){e=v.call(this,e)||this;return e._predicate=t,e._shouldContinueChecking=!0,e}r.SkipWhileEnumerable=y;var b,w=(n(_,b=c),_.prototype.reset=function(){b.prototype.reset.call(this),this._shouldContinueTaking=!0},_.prototype.copy=function(){return new _(this.source.copy(),this._predicate)},_.prototype.next=function(){return!!(b.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1)},_);function _(e,t){e=b.call(this,e)||this;return e._predicate=t,e._shouldContinueTaking=!0,e}r.TakeWhileEnumerable=w;var E,S=(n(M,E=c),M.prototype.copy=function(){return new M(this.source.copy(),this._otherSource.copy())},M.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},M.prototype.next=function(){this.currentValue.invalidate();var e=(this._isFirstSourceFinished?this._otherSource:this.source).next();return e||this._isFirstSourceFinished?e:(this._isFirstSourceFinished=!0,this.next())},M.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=(this._isFirstSourceFinished?this._otherSource:this.source).value()),this.currentValue.value},M);function M(e,t){e=E.call(this,e)||this;return e._otherSource=t,e._isFirstSourceFinished=!1,e}r.ConcatEnumerable=S;var O,A=(n(P,O=c),P.prototype.copy=function(){return new P(this.source.copy(),this._keySelector)},P.prototype.reset=function(){O.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},P.prototype.isUnique=function(e){var t=void 0!==this._keySelector?this._keySelector(e):e,e=typeof t;return e in this._seen.primitive?!this._seen.primitive[e].hasOwnProperty(t)&&(this._seen.primitive[e][t]=!0):-1===this._seen.complex.indexOf(t)&&-1<this._seen.complex.push(t)},P.prototype.next=function(){for(var e;(e=O.prototype.next.call(this))&&!this.isUnique(this.value()););return e},P);function P(e,t){e=O.call(this,e)||this;return e._keySelector=t,e._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},e}r.UniqueEnumerable=A;var F,L=(n(T,F=c),T.prototype.copy=function(){return new T(this.source.copy(),this._start,this._count)},T.prototype.reset=function(){F.prototype.reset.call(this),this._currentIndex=-1},T.prototype.isValidIndex=function(){var e=void 0!==this._start?this._start:0,t=void 0!==this._count?e+this._count:void 0;return this._currentIndex>=e&&(void 0===t||this._currentIndex<t)},T.prototype.performSkip=function(){for(var e=void 0!==this._start?this._start:0,t=!0;t&&this._currentIndex+1<e;)t=F.prototype.next.call(this),++this._currentIndex;return t},T.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,F.prototype.next.call(this)&&this.isValidIndex())},T.prototype.value=function(){if(!this.isValidIndex())throw new Error("Out of bounds");return F.prototype.value.call(this)},T);function T(e,t,r){var o=this;if(void 0!==t&&t<0||void 0!==r&&r<0)throw new Error("Incorrect parameters");return(o=F.call(this,e)||this)._start=t,o._count=r,o._currentIndex=-1,o}r.RangeEnumerable=L;var C,D=(n(I,C=e),I.prototype.copy=function(){return new I(this.source.copy(),this._transform)},I.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},I.prototype.reset=function(){C.prototype.reset.call(this),this._currentValue.invalidate()},I.prototype.next=function(){return this._currentValue.invalidate(),C.prototype.next.call(this)},I);function I(e,t){e=C.call(this,e)||this;return e._transform=t,e._currentValue=new l.Cached,e}r.TransformEnumerable=D;var R,x=(n(U,R=c),U.prototype.copy=function(){return new U(this.source.copy())},U.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},U.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},U.prototype.all=function(e){return this.source.all(e)},U.prototype.any=function(e){return void 0!==e?this.source.any(e):this.source.any()},U.prototype.average=function(e){return this.source.average(e)},U.prototype.count=function(e){return void 0!==e?this.source.count(e):this.source.count()},U.prototype.max=function(e){return void 0!==e?this.source.max(e):this.source.max()},U.prototype.min=function(e){return void 0!==e?this.source.min(e):this.source.min()},U.prototype.reverse=function(){return this.source.copy()},U.prototype.sum=function(e){return this.source.sum(e)},U.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},U.prototype.value=function(){if(!this._elements.isValid()||!this.isValidIndex())throw new Error("Out of bounds");return this._elements.value[this._elements.value.length-1-this._currentIndex]},U);function U(e){e=R.call(this,e)||this;return e._elements=new l.Cached,e._currentIndex=-1,e}r.ReverseEnumerable=x;var N,k=(n(j,N=e),j.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},j.prototype.orderBy=function(e,t){return new j(this.source.copy(),s.createComparer(e,!0,t))},j.prototype.orderByDescending=function(e){return new j(this.source.copy(),s.createComparer(e,!1,void 0))},j.prototype.thenBy=function(e,t){return new j(this.source.copy(),s.combineComparers(this._comparer,s.createComparer(e,!0,t)))},j.prototype.thenByDescending=function(e){return new j(this.source.copy(),s.combineComparers(this._comparer,s.createComparer(e,!1,void 0)))},j.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},j.prototype.copy=function(){return new j(this.source.copy(),this._comparer)},j.prototype.value=function(){if(!this._elements.isValid()||!this.isValidIndex())throw new Error("Out of bounds");return this._elements.value[this._currentIndex]},j.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},j.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)},j);function j(e,t){e=N.call(this,e)||this;return e._comparer=t,e._elements=new l.Cached,e._currentIndex=-1,e}r.OrderedEnumerable=k;var H,W=(n(V,H=c),V.prototype.toArray=function(){return this.list.toArray()},V.prototype.aggregate=function(e,t){return void 0!==t?this.list.aggregate(e,t):this.list.aggregate(e)},V.prototype.any=function(e){return void 0!==e?this.list.any(e):this.list.any()},V.prototype.all=function(e){return this.list.all(e)},V.prototype.average=function(e){return this.list.average(e)},V.prototype.count=function(e){return void 0!==e?this.list.count(e):this.list.count()},V.prototype.copy=function(){return new V(this.list.asArray())},V.prototype.elementAtOrDefault=function(e){return this.list.elementAtOrDefault(e)},V.prototype.firstOrDefault=function(e){return void 0!==e?this.list.firstOrDefault(e):this.list.firstOrDefault()},V.prototype.lastOrDefault=function(e){return void 0!==e?this.list.lastOrDefault(e):this.list.lastOrDefault()},V);function V(e){var t=H.call(this,new i.ArrayIterator(e))||this;return t.list=new a.List(e),t}r.ArrayEnumerable=W;var B,G=(n(z,B=e),z.prototype.copy=function(){return new z(this.source.copy(),this._defaultValue)},z.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},z.prototype.next=function(){var e=B.prototype.next.call(this);return this._mustUseDefaultValue=void 0===this._mustUseDefaultValue&&!e,this._mustUseDefaultValue||e},z.prototype.reset=function(){B.prototype.reset.call(this),this._mustUseDefaultValue=void 0},z);function z(e,t){e=B.call(this,e)||this;return e._mustUseDefaultValue=void 0,e._defaultValue=t,e}r.DefaultIfEmptyEnumerable=G;var q,Q=(n(J,q=e),J.prototype.copy=function(){return new J(this.source.copy(),this._otherSource.copy(),this._selector)},J.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._selector(this.source.value(),this._otherSource.value())),this._currentValue.value},J.prototype.reset=function(){q.prototype.reset.call(this),this._otherSource.reset(),this._isOneOfTheSourcesFinished=!1,this._currentValue.invalidate()},J.prototype.next=function(){return this._currentValue.invalidate(),this._isOneOfTheSourcesFinished||(this._isOneOfTheSourcesFinished=!q.prototype.next.call(this)||!this._otherSource.next()),!this._isOneOfTheSourcesFinished},J);function J(e,t,r){e=q.call(this,e)||this;return e._otherSource=t,e._isOneOfTheSourcesFinished=!1,e._currentValue=new l.Cached,e._selector=r,e}r.ZippedEnumerable=Q},{"./Collections":19,"./Comparers":20,"./Iterators":22,"./Utils":24}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=(n.prototype.copy=function(){return new n(this.source)},n.prototype.reset=function(){this._index=-1},n.prototype.isValidIndex=function(){return 0<=this._index&&this._index<this.source.length},n.prototype.next=function(){return++this._index,this.isValidIndex()},n.prototype.value=function(){if(!this.isValidIndex())throw new Error("Out of bounds");return this.source[this._index]},n);function n(e){this.source=e,this.reset()}r.ArrayIterator=o},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("./Enumerables");r.Enumerable=o.Enumerable;o=e("./Iterators");r.ArrayIterator=o.ArrayIterator;o=e("./Collections");r.List=o.List,r.Dictionary=o.Dictionary,r.Stack=o.Stack;e=e("./Comparers");r.strictEqualityComparer=e.strictEqualityComparer},{"./Collections":19,"./Comparers":20,"./Enumerables":21,"./Iterators":22}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=(n.prototype.invalidate=function(){this._isValid=!1},n.prototype.isValid=function(){return this._isValid},Object.defineProperty(n.prototype,"value",{get:function(){if(!this._isValid)throw new Error("Trying to get value of invalid cache");return this._value},set:function(e){this._value=e,this._isValid=!0},enumerable:!0,configurable:!0}),n);function n(){this._isValid=!1}r.Cached=o},{}],25:[function(e,t,r){"use strict";var o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.bf=r.credits=r.getCachedRegistries=r.getSlotDetails=r.setModuleLoaded=r.isModuleLoaded=r.setModuleReady=r.isModuleReady=r.getRocketeerSlots=r.getRegisteredModules=r.getQueuedSlots=r.getPageSlots=r.getExcludedSlotIds=r.getDispatchedSlots=r.getBuiltSlots=r.version=r.registerModule=r.__VERSION__=r.registry=r.setOptions=r.addEvent=r.dispatchQueue=r.enableLazyLoad=r.setBulkTargeting=r.clearSlots=r.removeSlotLevelTarget=r.addSlotLevelTarget=r.removePageLevelTarget=r.addPageLevelTarget=r.queueRegistry=r.refresh=r.destroySlots=r.configure=void 0,e("./presets.js");var n=e("@turnercode/digital-ads-utilities/dist"),i=e("./processors"),s=e("./system"),a=e("linq-collections"),l=e("./system/MissionControl"),u=(d.prototype.fireAdFuelCreated=function(){var t=this,e=1500,r=setInterval(function(){if("interactive"===document.readyState||"complete"===document.readyState){try{t.logger.log("Dispatching AdFuelCreated..."),document.dispatchEvent(new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}}))}catch(e){t.logger.error("Error dispatching AdFuelCreated",e)}clearInterval(r)}else e<1&&clearInterval(r);e--},1)},Object.defineProperty(d,"instance",{get:function(){var e;if(this._instance||(this._instance=new d,window.AdFuel=this._instance,null!==(e=this._instance.logger)&&void 0!==e&&e.warn("New AdFuel instance created.",this._instance.adFuelOptions)),this._instance.adFuelOptions=Object.assign(null!==(e=this._instance.adFuelOptions)&&void 0!==e?e:{},s.BaseAdFuelOptions),window.AdFuelModules){for(var t=0,r=window.AdFuelModules;t<r.length;t++){var o=r[t];this._instance.perf.addMark("Registering Module - ".concat(o.MODULE_NAME)),this._instance.registerModule(o)}window.AdFuelModules=void 0}return this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"missionControl",{get:function(){return this._missionControl},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"moduleManager",{get:function(){return this._moduleManager},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"adFuelOptions",{get:function(){var e;return null!==(e=null===(e=window.AdFuelOptions)||void 0===e?void 0:e.ADFUEL)&&void 0!==e?e:s.BaseAdFuelOptions},set:function(e){window.AdFuelOptions?window.AdFuelOptions.ADFUEL=e:window.AdFuelOptions={ADFUEL:e,USER_CONSENT:{ENABLED:!0}}},enumerable:!1,configurable:!0}),d.prototype.configure=function(e){var t=this;return"string"==typeof e?fetch(e).then(function(e){t.ingestOptions(e.json())}):this.ingestOptions(e),this},d.prototype.ingestOptions=function(e){if("ADFUEL"in e)for(var t in window.AdFuelOptions||(window.AdFuelOptions={ADFUEL:{},USER_CONSENT:{ENABLED:!0}}),e)window.AdFuelOptions&&t in window.AdFuelOptions?Object.assign(window.AdFuelOptions[t],e[t]):window.AdFuelOptions[t]=e[t];else this.adFuelOptions=Object.assign(this.adFuelOptions,e)},Object.defineProperty(d.prototype,"registryOptions",{get:function(){return this._registryOptions},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"consent",{get:function(){return this._consent},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"perf",{get:function(){return this._perf},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ver",{get:function(){return this._version.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"fetchedRegistries",{get:function(){return this._registryLoader.fetchedRegistries},enumerable:!1,configurable:!0}),d.prototype.lastProcessed=function(){if(0<this.processedData.count()){var t=this.processedData.max(function(e){return e.value.timestamp});return this.processedData.first(function(e){return e.value.timestamp===t}).value}return new s.GptProcessData},d.prototype.undispatched=function(){return 0<this.processedData.count()?this.processedData.select(function(e){return e.value}).where(function(e){return!e.dispatched}).where(function(e){var t=!1;return e.wrappedSlots.forEach(function(e){t=t||!!e.gSlot}),t}).toArray():[]},d.prototype.isModuleReady=function(e){return null!==(e=this.registeredModules.get(e).isReady)&&void 0!==e&&e},d.prototype.setModuleReady=function(e){this.logger.info("Module ".concat(e," is reporting ready.")),this.perf.addMark("Module ".concat(e," is ready.")),this.registeredModules.containsKey(e)?this.registeredModules.get(e).isReady=!0:this.registeredModules.setOrUpdate(e,{moduleName:e,isLoaded:!1,isReady:!1,unWrappedModule:void 0}),this._moduleManager.areAllModulesReady&&this._missionControl.setReady({readyId:"modules"})},d.prototype.isModuleLoaded=function(e){return null!==(e=this.registeredModules.get(e).isLoaded)&&void 0!==e&&e},d.prototype.setModuleLoaded=function(e){this.logger.log("Module ".concat(e," is reporting loaded.")),this.perf.addMark("Module ".concat(e," is loaded.")),this.registeredModules.containsKey(e)?this.registeredModules.get(e).isLoaded=!0:this.registeredModules.setOrUpdate(e,{moduleName:e,isLoaded:!1,isReady:!1,unWrappedModule:void 0})},d.prototype.queueRegistry=function(e,t){void 0===t&&(t={maintainCorrelator:!0,dispatch:this.adFuelOptions.AUTO_DISPATCH||!0}),null!==(r=this.logger)&&void 0!==r&&r.info("[queueRegistry] Queueing registry...",e,t),this.perf.addMark("Queueing Registry START"),this._initialRequestComplete=0<this.processedData.count(),t.slots&&(t.slots=Array.isArray(t.slots)?t.slots:[t.slots]),t.exclude&&(t.exclude=Array.isArray(t.exclude)?t.exclude:[t.exclude]),this._registryOptions=t;var r=Array.isArray(e)?{registry:e}:e,t=Object.assign({},this.adFuelOptions,t);return r.registry?this._registryLoader.loadRegistryFromJson(r.registry,t):this._registryLoader.loadRegistryFromUrl(e,t),this},d.prototype.flushCmdQueue=function(){for(this.logger.log("Flushing command",this._cmdQueue.length);0<this._cmdQueue.length;){var e=this._cmdQueue.shift();e&&(e(),this.logger.log("Command flushed."))}},d.prototype.dispatchQueue=function(e){var t=this;return void 0===e&&(e={}),this.undispatched().forEach(function(e){t.logger.log("[dispatchQueue] Dispatching Data: ",e),t._requestProcessor.dispatch(e)}),this},d.prototype.destroySlots=function(t){var r=this;void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var e=this.lastProcessed().wrappedSlots.where(function(e){return t.includes(e.slotId)});return this._slotProcessor.destroySlots(e.toArray()),e.forEach(function(e){r.perf.addMark("Destroying Slot ".concat(e.slotId)),e.gSlot=void 0}),this},d.prototype.addPageLevelTarget=function(e,t){t=Array.isArray(t)?t:[t];return this._targetProcessor.addPageLevelTargets(e,t),this.logger.log("Adding page level target ".concat(e)),this.perf.addMark("Adding Page-Level Target - ".concat(e)),this},d.prototype.removePageLevelTarget=function(e,t){var r=[];return t&&(r=Array.isArray(t)?t:[t]),this._targetProcessor.removePageLevelTargets(e,r),this.perf.addMark("Removing Page-Level Target - ".concat(e)),this},d.prototype.addSlotLevelTarget=function(e,t,r){var o=Array.isArray(r)?r:[r];return this._targetProcessor.addSlotLevelTargets(e,t,o),this.logger.log("Adding slot-level target slotId: ".concat(e,", targetKey: ").concat(t),r),this.perf.addMark("Adding Slot-Level Target - ".concat(t)),this},d.prototype.removeSlotLevelTarget=function(e,t,r){var o=[];return r&&(o=Array.isArray(r)?r:[r]),this._targetProcessor.removeSlotLevelTargets(e,t,o),this.perf.addMark("Removing Slot-Level Target - ".concat(t)),this},d.prototype.registerModule=function(e){return this.logger.info("Registering module: ".concat(e.MODULE_NAME,".")),this.perf.addMark("Registering Module - ".concat(e.MODULE_NAME)),this._moduleManager.registerModule(e),this},d.prototype.getSlotsForRefresh=function(e){var r,o=[];if(0<(e=void 0===e?[]:e).length)for(var n=this,t=0,i=e;t<i.length;t++)!function(t){var e=null===(r=n.processedData.firstOrDefault(function(e){return e.value.wrappedSlots.any(function(e){return t.includes(e.slotId)&&e.isBuilt})}))||void 0===r?void 0:r.value.wrappedSlots.firstOrDefault(function(e){return t.includes(e.slotId)&&e.isBuilt});e&&o.push(e)}(i[t]);else{var s=[];this.processedData.where(function(e){return e.value.wrappedSlots.any(function(e){return e.isBuilt})}).forEach(function(e){s.concat(e.value.wrappedSlots.where(function(e){return e.isBuilt}).toArray())}),s&&o.concat(s)}return o},d.prototype.refresh=function(e,r){var o=this;void 0===r&&(r=0),this.moduleManager.callPreRefresh(this.lastProcessed().wrappedSlots);var t,n=new a.List,n=e&&!["ALL","all","*","All"].includes(e)?(Array.isArray(e)||(e=[e]),new a.List(this.getSlotsForRefresh(e))):new a.List(this.lastProcessed().wrappedSlots.toArray());return this.lastProcessed().wrappedSlots?(t=function(){var t;0<n.count()&&0<r?(t=setInterval(function(){o._requestProcessor.refresh(n),o.moduleManager.callPostRefresh(n)},1e3*r),n.forEach(function(e){o._refreshers.containsKey(e.slotId)&&clearInterval(o._refreshers.get(e.slotId)),o._refreshers.setOrUpdate(e.slotId,t)})):0<n.count()&&0===r?o._requestProcessor.refresh(n):o.logger.warn("There is nothing to refresh.",n)},this._initialRequestComplete?t():this._waitingFunctions.push(t)):null!==(t=this.logger)&&void 0!==t&&t.warn("There are no slots defined. Has the registry been loaded?"),this},d.prototype.waitFor=function(e){return this.missionControl.register({readyId:e}),this},d.prototype.makeReady=function(e){return this.missionControl.setReady({readyId:e}),this},d.prototype.version=function(){return this._version},d.prototype.getBuiltSlots=function(){var t=[];return this.processedData.forEach(function(e){e.value.wrappedSlots.any(function(e){return e.isBuilt})&&t.push({timeStamp:e.value.timestamp,slots:e.value.wrappedSlots.where(function(e){return e.isBuilt}).toArray()})}),t},d.prototype.getDispatchedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(e){return e.hasBeenDisplayed}).toArray()},d.prototype.getExcludedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(e){return e.isExcluded}).toArray()},d.prototype.getPageSlots=function(){return this.lastProcessed().wrappedSlots.where(function(e){return e.isBuilt}).select(function(e){return e.gSlot}).toArray()},d.prototype.getQueuedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(e){return!e.isBuilt}).toArray()},d.prototype.getRegisteredModules=function(){return this.registeredModules.select(function(e){return e.value.unWrappedModule}).toArray()},d.prototype.getRocketeerSlots=function(){return this._registry.slots},d.prototype.clearSlots=function(e){return this._slotProcessor.clearSlots(e),this},d.prototype.setBulkTargeting=function(e){return this._targetProcessor.setBulkTargeting(e),this},d.prototype.enableLazyLoad=function(e){return e.fetch=e.fetch||500,e.render=e.render||200,e.scaling=e.scaling||2,this.perf.addMark("Enabling Lazy Load"),this._googleApi.enableLazyLoad(e),this},d.prototype.getSlotDetails=function(t){var e,r=this.lastProcessed().wrappedSlots.firstOrDefault(function(e){return e.slotId===t});if(r)return{adUnitPath:null!==(e=null===(e=r.gSlot)||void 0===e?void 0:e.getAdUnitPath())&&void 0!==e?e:"UNKNOWN",slotTargeting:r.targeting,programmatic:r.programmatic,response:null===(r=r.gSlot)||void 0===r?void 0:r.getResponseInformation()};this.logger.log("Couldn't find details for slot: ".concat(t))},d.prototype.getCachedRegistries=function(){var t=new Map;return this.processedData.forEach(function(e){t.set(e.value.url,o([e.value.registry],e.value.registry.slots,!0))}),t},d);function d(){var r=this;this._consent=new n.Consent,this._version=new n.Version(3,0,20,"Kohinoor Diamond Edition"),this._googleApi=new s.GoogleApi(this),this._missionControl=new l.MissionControl(this,this._googleApi),this._requestProcessor=new i.RequestProcessor(this,void 0,this._googleApi),this._moduleManager=new s.ModuleManager(this),this._targetProcessor=new i.TargetProcessor(this,this._googleApi,this._requestProcessor),this._slotProcessor=new i.SlotProcessor(this,this._targetProcessor,this._googleApi),this._queueDispatched=!1,this._initialRequestComplete=!1,this._waitingFunctions=[],this._refreshers=new a.Dictionary,this.processedData=new a.Dictionary,this._cmdQueue=[],this.registeredModules=new a.Dictionary,this._logger=new n.Logger("AdFuel TS",this._version.toString(),"adfuel","color: #4f86f7; padding: 2px"),this._perf=new n.Performance("ADFUEL TS"),this._gptScriptLoader=new s.GptScriptLoader(this.missionControl,this._logger),this._registryLoader=new s.RegistryLoader(this),this._overlayLoader=new s.OverlayLoader(this),this._gptScriptLoader.loadScript().then(function(){r._googleApi.flushCmdQueue()}),this._missionControl.firstProcessor=this._slotProcessor,this._perf.addMark("AdFuel Load END"),this._perf.addMeasure("AdFuel Load"),this.fireAdFuelCreated(),this._overlayLoader.startConsoleTool(),document.addEventListener("AdFuelRequestComplete",function(){r._initialRequestComplete=!0,r._waitingFunctions.forEach(function(e){e()}),r._waitingFunctions=[]}),window.addEventListener("load",function(){var e,t;r.logger.log("[window.load] Load fired:  AUTO_DISPATCH: ".concat(r.adFuelOptions.AUTO_DISPATCH," queueDispatched: ").concat(r._queueDispatched)),r.adFuelOptions.AUTO_DISPATCH||r._queueDispatched?r.adFuelOptions.AUTO_DISPATCH&&(r.dispatchQueue(),e=1,t=setInterval(function(){0<r.undispatched().length&&(r.logger.warn("[window.load] AdFuel is configured to automatically dispatch the queue on window.load but ".concat(100*e," milliseconds later and there are slots that still are not dispatched.")),r.logger.warn("[window.load] Undispatched: ",r.undispatched()),r.dispatchQueue()),5e3<100*e&&clearInterval(t),e++},100)):r.logger.error("[window.load] AdFuel is not configured to automatically dispatch the queue and the user's code never called AdFuel.dispatchQueue().")}),this.perf.addMark("AdFuel Created")}window.AdFuel=u.instance;r.configure=function(e){return u.instance.configure(e)};r.destroySlots=function(e){return u.instance.destroySlots(e=void 0===e?[]:e)};r.refresh=function(e,t){return u.instance.refresh(e,t)};r.queueRegistry=function(e,t){return u.instance.queueRegistry(e,t)};r.addPageLevelTarget=function(e,t){return u.instance.addPageLevelTarget(e,t)};r.removePageLevelTarget=function(e,t){return u.instance.removePageLevelTarget(e,t)};r.addSlotLevelTarget=function(e,t,r){return u.instance.addSlotLevelTarget(e,t,r)};r.removeSlotLevelTarget=function(e,t,r){return u.instance.removeSlotLevelTarget(e,t,r)};r.clearSlots=function(e){return u.instance.clearSlots(e=void 0===e?[]:e)};r.setBulkTargeting=function(e){return u.instance.setBulkTargeting(e)};r.enableLazyLoad=function(e){return u.instance.enableLazyLoad(e)};r.dispatchQueue=function(e){return u.instance.dispatchQueue(e)};r.addEvent=function(e,t,r){var o="background: red;color:white;",n="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",o,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",o,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",o,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",o,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",o,n),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",o,n),console.error("%c *** use addEventListener() instead.                         *** %c",o,n),console.error("%c *** No event was added                                      *** %c",o,n)};r.setOptions=function(){var e="background: red;color:white;",t="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",e,t),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",e,t),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",e,t),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",e,t),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",e,t),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",e,t),console.error("%c *** No options were set                                     *** %c",e,t)},r.registry={push:function(e,t){console.warn("%c *** This functionality will be removed in future releases. Instead of 'registry.push()', please use AdFuel.queueRegistry() *** %c","background: orange;color:white;","background: inherit;color:inherit;"),u.instance.queueRegistry(e,t)}};r.__VERSION__=function(){return u.instance.version().toString()};r.registerModule=function(e){return u.instance.registerModule(e)};r.version=function(){return u.instance.version()};r.getBuiltSlots=function(){return u.instance.getBuiltSlots()};r.getDispatchedSlots=function(){return u.instance.getDispatchedSlots()};r.getExcludedSlotIds=function(){return u.instance.getExcludedSlots()};r.getPageSlots=function(){return u.instance.getPageSlots()};r.getQueuedSlots=function(){return u.instance.getQueuedSlots()};r.getRegisteredModules=function(){return u.instance.getRegisteredModules()};r.getRocketeerSlots=function(){return u.instance.getRocketeerSlots()};r.isModuleReady=function(e){return u.instance.isModuleReady(e)};r.setModuleReady=function(e){u.instance.setModuleReady(e)};r.isModuleLoaded=function(e){return u.instance.isModuleLoaded(e)};r.setModuleLoaded=function(e){u.instance.setModuleLoaded(e)};r.getSlotDetails=function(e){return u.instance.getSlotDetails(e)};r.getCachedRegistries=function(){return u.instance.getCachedRegistries()};r.credits=function(){var e="\n\n          ░█████╗░██████╗░███████╗██╗░░░██╗███████╗██╗░░░░░░░░████████╗░██████╗\n          ██╔══██╗██╔══██╗██╔════╝██║░░░██║██╔════╝██║░░░░░░░░╚══██╔══╝██╔════╝\n          ███████║██║░░██║█████╗░░██║░░░██║█████╗░░██║░░░░░░░░░░░██║░░░╚█████╗░\n          ██╔══██║██║░░██║██╔══╝░░██║░░░██║██╔══╝░░██║░░░░░░░░░░░██║░░░░╚═══██╗\n          ██║░░██║██████╔╝██║░░░░░╚██████╔╝███████╗███████╗██╗░░░██║░░░██████╔╝\n          ╚═╝░░╚═╝╚═════╝░╚═╝░░░░░░╚═════╝░╚══════╝╚══════╝╚═╝░░░╚═╝░░░╚═════╝░\n          =====================================================================\n          Version: ".concat(u.instance.version().toString(),"\n          Developed by: \n            Joe Lazarski\n            Steve Trofemuk\n\n          Serve ads or die trying!\n  ");console.log(e)};r.bf=function(){console.info("\n  ++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>>--.+++++++++++++++++++++++.<<++.>+++++++++++++.>-----.---------------.\n  +++++++++++++++++.-----------------.<<.>+.>+++++++++++++.---.---------.-.++++++++.++++++++.----------.>++++++++++.\n  ")}},{"./presets.js":26,"./processors":30,"./system":45,"./system/MissionControl":36,"@turnercode/digital-ads-utilities/dist":11,"linq-collections":23}],26:[function(e,t,r){"use strict";window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},{}],27:[function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,s,a,l){return new(a=a||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,n)}i((l=l.apply(e,s||[])).next())})},l=this&&this.__generator||function(r,o){var n,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(r,a)}catch(e){t=[6,e],i=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RequestProcessor=void 0;var s=e("@turnercode/digital-ads-utilities"),e=(o.prototype.process=function(i){var e=this;return new Promise(function(o,n){return a(e,void 0,void 0,function(){var t,r=this;return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),null!==(t=this.adFuel.logger)&&void 0!==t&&t.groupStart("RequestProcessor ".concat(i.timestamp)),null!==(t=this.adFuel.logger)&&void 0!==t&&t.log(" ### START Request Processor ====",i.wrappedSlots.select(function(e){return e.toLogging()}).toArray(),i.options),null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Processing Request START"),[4,null===(t=this.googleApi)||void 0===t?void 0:t.configurePubAds().then(function(){return a(r,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:return(void 0!==i.options.dispatch?i.options.dispatch:i.options.AUTO_DISPATCH)&&(null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("RequestProcessor.process is calling Dispatch",i),r=i.wrappedSlots.where(function(e){return!e.hasBeenDisplayed&&e.isBuilt&&!e.isExcluded}).toList(),null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("========== [RequestProcessor/process] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(r),this.dispatch(i)),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Processing Request END"),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMeasure("Processing Request"),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("========== [RequestProcessor/process] CALLING POST DISPATCH =========="),[4,this.adFuel.moduleManager.callPostDispatch(i.wrappedSlots)];case 1:return e.sent(),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log(" ### STOP Request Processor ====",i.wrappedSlots.select(function(e){return e.toLogging()}).toArray(),i.options),null!==(r=this.adFuel.logger)&&void 0!==r&&r.groupEnd("RequestProcessor ".concat(i.timestamp)),this.nextProcessor?o(this.nextProcessor.process(i)):o(i),[2]}})})})];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),n(t),[3,3];case 3:return[2]}})})})},o.prototype.dispatch=function(n){var i,s;return a(this,void 0,void 0,function(){var r,t,o=this;return l(this,function(e){return 0<(r=n.wrappedSlots.where(function(e){return!e.hasBeenDisplayed&&e.isBuilt&&!e.isExcluded}).toList()).count()?(n.dispatched=!0,null!==(i=this.adFuel.logger)&&void 0!==i&&i.log("[RequestProcessor - dispatch] Setting dispatched to true",n),this.adFuel.processedData.setOrUpdate(n.timestamp,n),null!==(i=this.adFuel.logger)&&void 0!==i&&i.log("========== [RequestProcessor/dispatch] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(r).then(function(){var t;try{document.dispatchEvent(new CustomEvent("PreDispatchComplete",{detail:{slots:r.count()}}))}catch(e){null!==(t=o.adFuel.logger)&&void 0!==t&&t.error("Error dispatching custom event: PreDispatchComplete",{error:e})}o.buildGPTObject(n),r.forEach(function(e){var t;null!==(t=o.adFuel.perf)&&void 0!==t&&t.addMark("[".concat(e.slotId,"] Slot Displayed With Googletag")),googletag.display(e.gSlot),e.hasBeenDisplayed=!0}),null!==(t=o.googleApi)&&void 0!==t&&t.refreshSlots(r,{dispatch:!0}),null!==(t=o.adFuel.logger)&&void 0!==t&&t.log("========== [RequestProcessor/dispatch] CALLING POST DISPATCH =========="),o.adFuel.moduleManager.callPostDispatch(r),document.dispatchEvent(new CustomEvent("AdFuelRequestComplete",{detail:{slots:r.select(function(e){return e.unWrappedSlot}).toArray(),options:o.adFuel.registryOptions}}))})):null!==(i=this.adFuel.logger)&&void 0!==i&&i.log("No slots to dispatch."),t={slotsBuilt:n.wrappedSlots.where(function(e){return e.hasBeenDisplayed&&!e.isExcluded}).toArray(),registry:n.registry,optionsUsed:n.options},window.AdFuelHistory||(null!==(s=this.adFuel.logger)&&void 0!==s&&s.log("Creating AdFuelHistory"),window.AdFuelHistory=[]),null!==(s=this.adFuel.logger)&&void 0!==s&&s.log("Adding to AdFuelHistory",t),window.AdFuelHistory.push(t),[2]})})},o.prototype.refresh=function(t,r,o){var n;return void 0===r&&(r=!0),void 0===o&&(o=!0),a(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return null!==(n=this.adFuel.perf)&&void 0!==n&&n.addMark("Refresh Called..."),null!==(n=this.adFuel.logger)&&void 0!==n&&n.log("Refreshing slots",t.select(function(e){return e.toLogging()}).toArray()),r?[4,this.adFuel.moduleManager.callPreRefresh(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return null!==(n=this.googleApi)&&void 0!==n&&n.refreshSlots(t,this.adFuel.registryOptions),o?[4,this.adFuel.moduleManager.callPostRefresh(t)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}})})},o.prototype.buildGPTObject=function(e){var t,r,o,n,i=s.CookieHelper.readCookie("gptgeo");i?(r=i.split("%2C"),o=parseFloat(r[0]),n=parseFloat(r[1]),null!==(r=this.googleApi)&&void 0!==r&&r.setLocation(o,n),e.registry.child_directed_treatment&&null!==(t=this.googleApi)&&void 0!==t&&t.setChildDirectedTreatmentTag(e.registry.child_directed_treatment),e.registry.safeframe_config&&(null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("Setting SafeFrame config tag: ",e.registry.safeframe_config),null!==(t=this.googleApi)&&void 0!==t&&t.setSafeFrameConfig(e.registry.safeframe_config))):null!==(e=this.adFuel.logger)&&void 0!==e&&e.log("Unable to retrieve location cookie",i)},o);function o(e,t,r){this.adFuel=e,this.nextProcessor=t,this.googleApi=r}r.RequestProcessor=e},{"@turnercode/digital-ads-utilities":11}],28:[function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,s,a,l){return new(a=a||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,n)}i((l=l.apply(e,s||[])).next())})},u=this&&this.__generator||function(r,o){var n,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(r,a)}catch(e){t=[6,e],i=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.SlotProcessor=void 0;var n=e("../system"),i=e("linq-collections"),e=(s.prototype.process=function(l){var e=this;return new Promise(function(s,a){return o(e,void 0,void 0,function(){var t,r,o,n,i=this;return u(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),null!==(r=this.adFuel.logger)&&void 0!==r&&r.groupStart("SlotProcessor ".concat(l.timestamp)),null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("Entering SlotProcessor.Process()"),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("SlotProcessor.Process() START"),t=l.wrappedSlots.select(function(e){return e.toLogging()}).toArray(),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log(" ### START Slot Processor ====",t,l.options),l.wrappedSlots.forEach(function(e){var t;null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("[".concat(e.slotId,"] SlotProcessor.Process()"))}),this.buildSlots(l),[4,this.adFuel.moduleManager.callPostQueue(l.wrappedSlots)];case 1:return e.sent(),null!==(o=this.adFuel.logger)&&void 0!==o&&o.log(" ### STOP Slot Processor ====",t,l.options),null!==(o=this.adFuel.logger)&&void 0!==o&&o.log("========== [slotProcessor/process] CALLING PRE DISPATCH =========="),[4,this.adFuel.moduleManager.callPreDispatch(l.wrappedSlots)];case 2:return e.sent(),null!==(o=this.adFuel.perf)&&void 0!==o&&o.addMark("SlotProcessor.Process() END"),null!==(o=this.adFuel.perf)&&void 0!==o&&o.addMeasure("SlotProcessor.Process()"),null!==(o=this.adFuel.logger)&&void 0!==o&&o.groupEnd("SlotProcessor ".concat(l.timestamp)),this.nextProcessor?s(null===(n=this.nextProcessor)||void 0===n?void 0:n.process(l)):s(l),[3,4];case 3:return n=e.sent(),a(n),[3,4];case 4:return[2]}})})})},s.prototype.buildSlots=function(o){var e,n=this,t=o.wrappedSlots.where(function(e){return!e.isBuilt&&!e.hasBeenDisplayed&&e.slotExistsOnPage&&!e.isExcluded});t.forEach(function(t){var e,r=n.adFuel.processedData.where(function(e){return e.value.url===o.url}).select(function(e){return null===(e=e.value.wrappedSlots.firstOrDefault(function(e){return e.isBuilt&&e.slotId===t.slotId}))||void 0===e?void 0:e.gSlot}).toArray();0<r.length&&void 0!==r[0]&&(null!==(e=n.adFuel.logger)&&void 0!==e&&e.info("Found historic gslot for ".concat(t.slotId),r),t.isExcluded=!0)}),null!==(e=this.adFuel.logger)&&void 0!==e&&e.info("Building these slots: ",t.select(function(e){return e.toLogging()}).toArray()),t.where(function(e){return!e.isBuilt}).forEach(function(e){var t;null!==(t=n.adFuel.logger)&&void 0!==t&&t.info("Building slot for ".concat(e.slotId)),n.buildSlot(e),n.setResponsive(e),e.unWrappedSlot.safeframe_config&&n.googleApi.setSlotSafeFrameConfig(e.gSlot,e.unWrappedSlot.safeframe_config)})},s.prototype.buildSlot=function(e){var t,r,o="/".concat(this.adFuel.adFuelOptions.NETWORK_ID,"/").concat(e.adUnitMap||e.slotId),n=e.slotId;null!==(i=this.adFuel.perf)&&void 0!==i&&i.addMark("Building Slot [".concat(e.slotId,"] adPath ").concat(o," START")),e=this.getSlotIfAlreadyProcessed(e);var i=document.getElementById(e.slotId);if(null!=i&&i.className.includes("adfuel-rendered"))null!==(i=this.adFuel.logger)&&void 0!==i&&i.warn("".concat(e.slotId," is already built, but you are trying to build it again."));else if(e.isBuilt)null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("Found slot for ".concat(e.slotId," in processedData."),e);else if(e.isOutOfPage)e.gSlot=this.googleApi.defineOutOfPageSlot(o,n);else{null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("Defining slot for ".concat(e.slotId),e);try{e.gSlot=this.googleApi.defineSlot(o,e.unWrappedSlot.sizes,n)}catch(e){null!==(r=this.adFuel.logger)&&void 0!==r&&r.error("Error defining slot: ",e)}null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("Slot built!",e)}null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Building Slot [".concat(e.slotId,"] adPath ").concat(o," END")),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMeasure("Building Slot [".concat(e.slotId,"] adPath ").concat(o))},s.prototype.getSlotIfAlreadyProcessed=function(t){var e=null===(e=this.adFuel.processedData.firstOrDefault(function(e){return e.value.wrappedSlots.any(function(e){return e.slotId===t.slotId&&e.isBuilt})}))||void 0===e?void 0:e.value.wrappedSlots.firstOrDefault(function(e){return e.slotId===t.slotId&&e.isBuilt});return t=null!=e?e:t},s.prototype.setResponsive=function(e){var t;e.isBuilt&&(null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Setting Responsive Mapping [".concat(e.slotId,"]")),this.googleApi.defineSlotSizeMapping(e.gSlot,e.unWrappedSlot.responsive))},s.prototype.changeSlotId=function(e,t){var r=e.slotId.slice();e.unWrappedSlot.rktr_slot_id=t;try{document.dispatchEvent(new CustomEvent("SlotIdChange",{detail:{asset:e.unWrappedSlot,originalId:r,newId:t}}))}catch(e){null!==(t=this.adFuel.logger)&&void 0!==t&&t.error("Error dispatching SlotIdChange event.",e)}},s.prototype.destroySlots=function(i){var s=this;void 0===i&&(i=[]),this.googleApi.executeWhenAvailable(function(){for(var e,t=[],r=0,o=i;r<o.length;r++){var n=o[r];n.gSlot&&t.push(n.gSlot)}null!==(e=s.adFuel.perf)&&void 0!==e&&e.addMark("Destroying Slots [".concat(JSON.stringify(t.map(function(e){return e.getSlotElementId()})),"]")),s.googleApi.destroySlots(t)})},s.prototype.clearSlots=function(r){var o=this;this.googleApi.executeWhenAvailable(function(){var e,t=(null!==(e=null===(t=o.adFuel.lastProcessed())||void 0===t?void 0:t.wrappedSlots)&&void 0!==e?e:new i.List).where(function(e){return r.includes(e.slotId)&&e.isBuilt}).select(function(e){return e.gSlot}).toArray();null!==(e=o.adFuel.perf)&&void 0!==e&&e.addMark("Clearing Slots [".concat(JSON.stringify(t.map(function(e){return e.getSlotElementId()})),"]")),o.googleApi.clearSlots(t)})},s);function s(e,t,r){void 0===r&&(r=new n.GoogleApi(e)),this.adFuel=e,this.nextProcessor=t,this.googleApi=r}r.SlotProcessor=e},{"../system":45,"linq-collections":23}],29:[function(e,t,r){"use strict";var d=this&&this.__assign||function(){return(d=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.TargetProcessor=void 0;var l=e("@turnercode/digital-ads-utilities/dist/getUrlParam"),e=(o.prototype.process=function(h){var f=this;return new Promise(function(e,t){var r,o,n,i,s,a,l,u,d,c,p,g;try{null!==(r=f.adFuel.perf)&&void 0!==r&&r.addMark("TargetProcessor.Process() START"),null!==(o=f.adFuel.logger)&&void 0!==o&&o.groupStart("TargetProcessor ".concat(h.timestamp)),null!==(n=f.adFuel.logger)&&void 0!==n&&n.log(" ### START Target Processor ====",h.wrappedSlots.select(function(e){return e.toLogging()}).toArray(),h.options),null!==(i=f.adFuel.logger)&&void 0!==i&&i.log("slotTargets",f._slotTargets),null!==(s=f.adFuel.logger)&&void 0!==s&&s.log("pageTargets",f._pageTargets),f._slotTargets=Object.assign({},f._slotTargets,h.slotTargets),f._pageTargets=Object.assign({},f._pageTargets,h.pageTargets),null!==(a=f.adFuel.logger)&&void 0!==a&&a.log("slotTargets",f._slotTargets),null!==(l=f.adFuel.logger)&&void 0!==l&&l.log("pageTargets",f._pageTargets),f.getAdsQaTargeting(),f.buildSlotLevelTargeting(h),f.buildPageLevelTargeting(h),null!==(u=f.adFuel.logger)&&void 0!==u&&u.log(" ### STOP Target Processor ====",h.wrappedSlots.select(function(e){return e.toLogging()}).toArray(),h.options),null!==(d=f.adFuel.perf)&&void 0!==d&&d.addMark("TargetProcessor.Process() END"),null!==(c=f.adFuel.perf)&&void 0!==c&&c.addMeasure("TargetProcessor.Process()"),null!==(p=f.adFuel.logger)&&void 0!==p&&p.groupEnd("TargetProcessor ".concat(h.timestamp)),f.nextProcessor?e(null===(g=f.nextProcessor)||void 0===g?void 0:g.process(h)):e(h)}catch(e){t(e)}})},o.prototype.windowObjectName=function(e){var t,r;return(null!==(r=null!==(t=null===(t=e.registry)||void 0===t?void 0:t.root)&&void 0!==t?t:null===(r=e.registry)||void 0===r?void 0:r.site)&&void 0!==r?r:"").toUpperCase()},o.prototype.buildSlotLevelTargeting=function(i){var e,s,a,l;null!==(e=this.adFuel.logger)&&void 0!==e&&e.log("Building slot level targeting.");for(var t=function(o){null!==(l=u.adFuel.perf)&&void 0!==l&&l.addMark("Building Slot-Level Targeting [".concat(o.slotId,"]"));var e=(null===(l=u.adFuel.adFuelOptions[u.windowObjectName(i)])||void 0===l?void 0:l.slotTargets)||[],t={pos:[o.posMap]},n=d(d(d({},u._slotTargets[o.slotId]),t),e);null!==(l=u.adFuel.logger)&&void 0!==l&&l.log("slotTargets to be built are: ",n,o);for(var r in n)!function(r){var e,t;o.gSlot?0<(t=null!==(s=n[r].filter(function(e){var t;return null!==(e=!(null!==(t=o.requestedSlotTargets[r])&&void 0!==t&&t.includes(e)))&&e}))&&void 0!==s?s:[]).length&&(null!==(a=u.adFuel.logger)&&void 0!==a&&a.log("Setting slot targeting: ",{slot:o.slotId,key:r,value:t}),o.gSlot.setTargeting(r,t),o.requestedSlotTargets[r]?(e=o.requestedSlotTargets[r]).push.apply(e,t):o.requestedSlotTargets[r]=c([],t,!0)):null!==(a=u.adFuel.logger)&&void 0!==a&&a.warn("Slot ".concat(o.slotId," could not find the gslot and goes home disappointed."))}(r);null!==(l=u.adFuel.logger)&&void 0!==l&&l.log("Built slot targeting:",n,o)},u=this,r=0,o=i.wrappedSlots.where(function(e){return e.isBuilt&&!e.isExcluded}).toArray();r<o.length;r++)t(o[r])},o.prototype.buildPageLevelTargeting=function(e){null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("Building page level targeting."),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Building Page-Level Targeting");var t,r=(null===(r=window[this.windowObjectName(e)])||void 0===r?void 0:r.adTargets)||[],e=(null===(e=e.registry)||void 0===e?void 0:e.targeting)||[],o=d(d(d({},this._pageTargets),e),r);for(t in null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("pageTargets to be built are: ",o),o)null!=o[t]&&this._googleApi.setTargeting(t,o[t]);null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("Built page targeting",o)},o.prototype.getAdsQaTargeting=function(){var e,t,r;try{null!==(e=this.adFuel.perf)&&void 0!==e&&e.addMark("Getting AdsQA Targeting");var o,n,i,s,a=(0,l.getUrlParam)("adsqa");a&&(null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("ADSQA detected."),o=a.split("%3D"),1<a.length?(n=o[0],i=o[1],s=Array.isArray(i)?i:[i],this._pageTargets[n]=s):null!==(r=this.adFuel.logger)&&void 0!==r&&r.info("ADSQA parsing problem",o))}catch(e){null!==(o=this.adFuel.logger)&&void 0!==o&&o.error("checkForAdsQA",e)}},o.prototype.removeTargets=function(e,t,r){var o;null!==(o=this.adFuel.perf)&&void 0!==o&&o.addMark("Removing Targeting [".concat(t,"] ").concat(JSON.stringify(r))),r?e[t]=e[t].filter(function(e){return!r.includes(e)}):delete e[t]},o.prototype.addTargets=function(t,r,e){var o;t[r]=e,null!==(o=this.adFuel.perf)&&void 0!==o&&o.addMark("Adding Targeting [".concat(r,"] ").concat(JSON.stringify(e))),t[r]?t[r]=c(c([],null!==(o=t[r])&&void 0!==o?o:[],!0),e.filter(function(e){return!t[r].includes(e)}),!0):t[r]=c([],e,!0)},o.prototype.addPageLevelTargets=function(e,t){this.addTargets(this._pageTargets,e,t)},o.prototype.removePageLevelTargets=function(e,t){this.removeTargets(this._pageTargets,e,t)},o.prototype.addSlotLevelTargets=function(e,t,r){this._slotTargets[e]||(this._slotTargets[e]={}),this.addTargets(this._slotTargets[e],t,r)},o.prototype.removeSlotLevelTargets=function(e,t,r){this.removeTargets(this._slotTargets[e],t,r)},o.prototype.setBulkTargeting=function(e){var t;if(e.slotTargets||e.adTargets){if(null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Setting Bulk Targeting"),e.slotTargets)for(var r=0,o=e.slotTargets;r<o.length;r++){var n=o[r];this.addSlotLevelTargets(n.slotId,n.targetKey,n.targetValues)}if(e.adTargets)for(var i=0,s=e.adTargets;i<s.length;i++){var a=s[i];this.addPageLevelTargets(a.targetKey,a.targetValues)}}else null!==(t=this.adFuel.logger)&&void 0!==t&&t.error("setBulkTargeting was passed a bad parameter.",e)},o);function o(e,t,r){void 0===r&&(r=void 0),this.adFuel=e,this._googleApi=t,this.nextProcessor=r,this._slotTargets={},this._pageTargets={}}r.TargetProcessor=e},{"@turnercode/digital-ads-utilities/dist/getUrlParam":9}],30:[function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("../system/OptionsParser"),r),n(e("./RequestProcessor"),r),n(e("./SlotProcessor"),r),n(e("./TargetProcessor"),r)},{"../system/OptionsParser":39,"./RequestProcessor":27,"./SlotProcessor":28,"./TargetProcessor":29}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AController=void 0,r.AController=function(e){(this.missionControl=e).register(this)}},{}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseAdFuelOptions=void 0,r.BaseAdFuelOptions={AUTO_DISPATCH:!0,COLLAPSE_EMPTY_DIVS:!0,DEFAULT_TIMEOUT:1200,DEFAULT_DESKTOP_TIMEOUT:1200,DEFAULT_MOBILE_TIMEOUT:800,IFRAME_TITLE:"advertisement",NETWORK_ID:"8663477"}},{}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleApi=void 0;var o=e("@turnercode/digital-ads-utilities/dist/getUrlParam"),e=(n.prototype.executeWhenAvailable=function(e){var t;window.googletag?(null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("Pushing command to google.cmd array"),this.flushCmdQueue(),googletag.cmd.push(e)):(null!==(t=this.adFuel.logger)&&void 0!==t&&t.warn("It seems googletag does not exist yet. Queuing command..."),this._commandQueue.push(e))},n.prototype.flushCmdQueue=function(){for(;0<this._commandQueue.length;)googletag.cmd.push(this._commandQueue.shift())},Object.defineProperty(n.prototype,"isAvailable",{get:function(){var e,t;return null!==(e=googletag.apiReady)&&void 0!==e&&e&&null!==(t=googletag.pubadsReady)&&void 0!==t&&t},enumerable:!1,configurable:!0}),n.prototype.destroySlots=function(t){var r=this;0<t.length?this.executeWhenAvailable(function(){var e;t.forEach(function(e){var t;null!==(t=r.adFuel.perf)&&void 0!==t&&t.addMark("Destroying Slot: ".concat(e.getSlotElementId()))}),null!==(e=window.googletag)&&void 0!==e&&e.destroySlots(t)}):this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Destroying All Slots"),null!==(e=window.googletag)&&void 0!==e&&e.destroySlots()})},n.prototype.clearSlots=function(t){var r=this;0<(t=void 0===t?[]:t).length?this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Clearing Slots"),t.forEach(function(e){var t;null!==(t=r.adFuel.perf)&&void 0!==t&&t.addMark("Clearing Slot: ".concat(e.getSlotElementId()))}),googletag.pubads().clear(t)}):googletag.cmd.push(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Clearing All Slots"),googletag.pubads().clear()})},n.prototype.defineOutOfPageSlot=function(e,t){var r,e=googletag.defineOutOfPageSlot(e,t);if(window.googletag&&e)null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Defined OOP GPT Slot - ".concat(t)),e.addService(window.googletag.pubads());else{if(!window.googletag)throw Error("Googletag not defined.");null!==(r=this.adFuel.logger)&&void 0!==r&&r.warn("Unable to define slot: ".concat(t))}return e},n.prototype.defineSlot=function(e,t,r){var o,n;null!==(i=this.adFuel.logger)&&void 0!==i&&i.info("Building Standard Slot Object adPath:".concat(e," sizes:").concat(t," slotId:").concat(r));for(var i=void 0,s=[],a=0,l=t;a<l.length;a++){var u=l[a].map(Number);s.push([u[0],u[1]])}try{i=googletag.defineSlot(e,s,r),window.googletag&&i&&(null!==(o=this.adFuel.logger)&&void 0!==o&&o.info("Defined slot: ".concat(r),i),null!==(n=this.adFuel.perf)&&void 0!==n&&n.addMark("Defined Standard GPT Slot - ".concat(r)),i.addService(window.googletag.pubads()))}catch(e){null!==(n=this.adFuel.logger)&&void 0!==n&&n.warn("Unable to define slot: ".concat(r),e)}return i},n.prototype.defineSlotSizeMapping=function(e,t){var r,o;e&&(o=e.getSlotElementId(),null!==(r=this.adFuel.logger)&&void 0!==r&&r.info("Setting Slot size mapping slotId: ".concat(o," responsiveMap: "),t),e.defineSizeMapping(t),null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Defined Slot Responsive Mapping - ".concat(e.getSlotElementId())))},n.prototype.setTargeting=function(t,r){var o=this;this.executeWhenAvailable(function(){var e;googletag.pubads().setTargeting(t,r),null!==(e=o.adFuel.perf)&&void 0!==e&&e.addMark("Defined Page Target - ".concat(t))})},n.prototype.displaySlotById=function(t){var r=this;this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Displaying Slot - ".concat(t)),googletag.display(t)})},n.prototype.refreshSlots=function(e,t){var r=this,o=t||{maintainCorrelator:!0},n=e.where(function(e){return e.isBuilt}).select(function(e){return e.gSlot}).toArray();0<n.length?this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.logger)&&void 0!==e&&e.log("GoogleAPI, Refreshing Slots: ".concat(JSON.stringify(n.map(function(e){return e.getSlotElementId()})))),n.forEach(function(e){var t;null!==(t=r.adFuel.perf)&&void 0!==t&&t.addMark("Refreshing Slot ".concat(e.getSlotElementId()))}),googletag.pubads().refresh(n,{changeCorrelator:!o.maintainCorrelator})}):this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.logger)&&void 0!==e&&e.log("GoogleAPI, Refreshing all slots"),null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Refreshing All Slots"),googletag.pubads().refresh(void 0,{changeCorrelator:!o.maintainCorrelator})})},n.prototype.configurePubAds=function(){var M=this;return new Promise(function(r){M._pubAdsConfigured?r():(M._pubAdsConfigured=!0,M.executeWhenAvailable(function(){null!==(e=M.adFuel.perf)&&void 0!==e&&e.addMark("Configuring GPT START"),googletag.pubads().addEventListener("impressionViewable",function(e){var t,r=e.slot.getSlotElementId();null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMark("[".concat(r,"] Impression Viewable")),null!==(r=M.adFuel.logger)&&void 0!==r&&r.info("impressionViewable",e),document.dispatchEvent(new CustomEvent("SlotViewable",{detail:e}))}).addEventListener("slotVisibilityChanged",function(e){var t;null!==(t=M.adFuel.logger)&&void 0!==t&&t.info("slotVisibilityChanged",e),document.dispatchEvent(new CustomEvent("slotVisibilityChanged",{detail:e}))}).addEventListener("slotRenderEnded",function(e){var t,r,o,n,i,s,a,l,u,d,c,p,g,h,f,v=e.slot.getSlotElementId();null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMark("[".concat(v,"] Slot Render Ended")),null!==(v=M.adFuel.logger)&&void 0!==v&&v.info("slotRenderEnded",e);try{var y=M.adFuel.processedData.getKeys(),m=null!==(o=null===(r=e.slot)||void 0===r?void 0:r.getSlotElementId())&&void 0!==o?o:"NO ID",b={};y.forEach(function(e){M.adFuel.processedData.get(e).wrappedSlots.forEach(function(e){e.unWrappedSlot.rktr_slot_id===m&&(b=e)})}),null!==(n=M.adFuel.logger)&&void 0!==n&&n.log("========== Active Slot: ",b),b.responseData={advertiserId:e.advertiserId,campaignId:e.campaignId,creativeId:e.creativeId,isEmpty:e.isEmpty,lineItemId:e.lineItemId,renderedSize:e.size,sourceAgnosticCreativeId:e.sourceAgnosticCreativeId,sourceAgnosticLineItemId:e.sourceAgnosticLineItemId};var w={asset:e.slot,pos:e.slot?e.slot.getTargeting("pos"):[""],empty:!!e.isEmpty,renderedSize:null!==(i=e.size)&&void 0!==i?i:"0x0",creativeId:null!==(s=e.sourceAgnosticCreativeId)&&void 0!==s?s:"0",lineItemId:null!==(a=e.sourceAgnosticLineItemId)&&void 0!==a?a:"0",serviceName:null!==(l=e.serviceName)&&void 0!==l?l:"",divId:null!==(d=null===(u=e.slot)||void 0===u?void 0:u.getSlotElementId())&&void 0!==d?d:"NO ID"};w.empty&&M.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS&&(document.getElementById(w.divId).style.display="none");var _=e.slot.getTargeting("creativeId")||[];e.creativeId&&_.indexOf(""+e.creativeId)<0&&_.push(""+e.creativeId);var E,S=e.slot.getTargeting("lineItemId")||[];e.lineItemId&&S.indexOf(""+e.lineItemId)<0&&S.push(""+e.lineItemId),"NO ID"!=w.divId&&(E=document.getElementById(w.divId),null!==(c=M.adFuel.logger)&&void 0!==c&&c.log("Getting element for ".concat(w.divId," to set className."),E),E?E.className.includes("adfuel-rendered")||(E.className="".concat(E.className," adfuel-rendered").trim(),null!==(p=M.adFuel.logger)&&void 0!==p&&p.log("".concat(w.divId," className ").concat(E.className))):null!==(g=M.adFuel.logger)&&void 0!==g&&g.warn("Could not find element ".concat(w.divId," to set adfuel-rendered in className."))),M.executeWhenAvailable(function(){e.slot.setTargeting("creativeId",_),e.slot.setTargeting("lineItemId",S)}),null!==(h=M.adFuel.logger)&&void 0!==h&&h.info("Dispatching GPTRenderComplete: ",w),w.divId?null!==(f=document.getElementById(w.divId))&&void 0!==f&&f.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:w,bubbles:!0})):document.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:w}))}catch(e){null!==(w=M.adFuel.logger)&&void 0!==w&&w.error("Error dispatching custom event: GPTRenderComplete",e)}}).addEventListener("slotOnload",function(e){var t,r=e.slot.getSlotElementId();null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMark("[".concat(r,"] Slot Loaded")),null!==(r=M.adFuel.logger)&&void 0!==r&&r.info("slotOnLoad",e),document.dispatchEvent(new CustomEvent("GPTSlotLoaded",{detail:e}))}),null!==(e=M.adFuel.logger)&&void 0!==e&&e.info("Enabling 'Collapse Empty Divs'"),googletag.pubads().collapseEmptyDivs(null===(e=M.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS)||void 0===e||e),null!==(e=M.adFuel.logger)&&void 0!==e&&e.info("Enabling 'Async Rendering'"),googletag.pubads().enableAsyncRendering(),null!==(e=M.adFuel.logger)&&void 0!==e&&e.info("Enabling 'Single Request'"),googletag.pubads().enableSingleRequest(),(0,o.getUrlParam)("enableInitialLoad")||(null!==(t=M.adFuel.logger)&&void 0!==t&&t.info("Disabling 'Initial Load'"),googletag.pubads().disableInitialLoad());var e=M.adFuel.consent.getUserConsentRegion,t=M.adFuel.consent.getConsent;"ccpa"!==e||t||googletag.pubads().setPrivacySettings({restrictDataProcessing:!0}),null!==(t=M.adFuel.logger)&&void 0!==t&&t.info("Enabling 'Services'"),null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMark("Configuring GPT END"),null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMeasure("Configuring GPT"),null!==(t=M.adFuel.perf)&&void 0!==t&&t.addMark("Enabling GPT Services"),googletag.enableServices(),r()}))})},n.prototype.enableLazyLoad=function(t){var r=this;this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Enabling GPT Lazy Load"),googletag.pubads().enableLazyLoad({fetchMarginPercent:t.fetch,renderMarginPercent:t.render,mobileScaling:t.scaling})})},n.prototype.setChildDirectedTreatmentTag=function(e){var t,r=this;this._setChildDirectedTreatment?(this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Setting Child-Directed Treatment"),googletag.pubads().setPrivacySettings({childDirectedTreatment:!0,underAgeOfConsent:!0})}),this._setChildDirectedTreatment=!1):null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("setChidlDirectedTreatment has already been caleld.")},n.prototype.setLocation=function(t,r){var o=this;this.executeWhenAvailable(function(){var e;null!==(e=o.adFuel.perf)&&void 0!==e&&e.addMark("Setting Location"),googletag.pubads().setLocation(t,r)})},n.prototype.setSafeFrameConfig=function(t){var r=this;this.executeWhenAvailable(function(){var e;null!==(e=r.adFuel.perf)&&void 0!==e&&e.addMark("Setting SafeFrame Config"),googletag.pubads().setSafeFrameConfig(t)})},n.prototype.setSlotSafeFrameConfig=function(t,r){var o=this;t&&this.executeWhenAvailable(function(){var e;null!==(e=o.adFuel.perf)&&void 0!==e&&e.addMark("[".concat(t.getSlotElementId(),"] Setting Slot SafeFrame Config")),t.setSafeFrameConfig(r)})},n);function n(e){this.adFuel=e,this._pubAdsConfigured=!1,this._commandQueue=[],this._setChildDirectedTreatment=!0}r.GoogleApi=e},{"@turnercode/digital-ads-utilities/dist/getUrlParam":9}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GptProcessData=void 0;var o=e("linq-collections"),e=(n.prototype.build=function(e,t,r,o,n,i){return void 0===o&&(o=""),void 0===n&&(n={}),void 0===i&&(i={}),this.timestamp=(new Date).getTime(),this.registry=e,this.wrappedSlots=t,this.options=r,this.url=o,this.pageTargets=n,this.slotTargets=i,this.dispatched=!1,this},n.prototype.clone=function(){return(new n).build(this.registry&&JSON.parse(JSON.stringify(this.registry)),new o.List(this.wrappedSlots.toArray()),this.options&&JSON.parse(JSON.stringify(this.options)),"".concat(this.url),JSON.parse(JSON.stringify(this.pageTargets)),JSON.parse(JSON.stringify(this.slotTargets)))},n);function n(){this.wrappedSlots=new o.List,this.url="",this.pageTargets={},this.slotTargets={},this.dispatched=!1}r.GptProcessData=e},{"linq-collections":23}],35:[function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.GptScriptLoader=void 0;var i,s=e("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),e=e("../system/AController"),n=(i=e.AController,n(a,i),Object.defineProperty(a.prototype,"readyId",{get:function(){return"gptScript"},enumerable:!1,configurable:!0}),a.prototype.loadScript=function(){var e,r=this;return null!==(e=this.perf)&&void 0!==e&&e.addMark("GPT Script Load START"),(0,s.loadScriptFromUrl)("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPTScript",this._document).then(function(){var e,t=(null===(e=window.googletag)||void 0===e?void 0:e.getVersion())||"unknown";null!==(e=r.logger)&&void 0!==e&&e.info("GPT is loaded. Version is ".concat(t)),null!==(t=r.perf)&&void 0!==t&&t.addMark("GPT Script Load END"),null!==(t=r.perf)&&void 0!==t&&t.addMeasure("GPT Script Load")})},a);function a(e,t,r,o){void 0===o&&(o=document);var n=i.call(this,e)||this;return n.missionControl=e,n.logger=t,n.perf=r,n._document=o,n.missionControl.setReady(n),n}r.GptScriptLoader=n},{"../system/AController":31,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":12}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MissionControl=void 0;var o=e("linq-collections"),e=(n.prototype.register=function(e){this._ready.setOrUpdate(e.readyId,!1),null!==(e=this.adFuel.logger)&&void 0!==e&&e.info("Ready at Register",JSON.parse(JSON.stringify(this._ready))),null!==(e=this.adFuel.perf)&&void 0!==e&&e.addMark("Ready at Register")},Object.defineProperty(n.prototype,"firstProcessor",{get:function(){return this._firstProcessor},set:function(e){this._firstProcessor=e},enumerable:!1,configurable:!0}),n.prototype.setReady=function(e){var t,r=this;if(e){if(!this._ready.containsKey(e.readyId))throw new Error("Key not found in ReadyEngine: ".concat(e.readyId));this._ready.setOrUpdate(e.readyId,!0),null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("Ready",JSON.parse(JSON.stringify(this._ready)))}if(this.readyToLaunch()){if(null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Ready To Launch"),!this._firstProcessor)throw new Error("All processes are ready, but FirstProcessor is not set.");null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("First Processor - Processing"),this.googleApi.executeWhenAvailable(function(){r.runProcessChain(),r.adFuel.flushCmdQueue()})}},n.prototype.runProcessChain=function(){var e,t,r=this,o=this.processQueue.shift();null!==(e=this.adFuel.logger)&&void 0!==e&&e.log("[runProcessChain] ProcessData: ",o),o?(null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("[runProcessChain] Starting chain with this data",o),this.adFuel.moduleManager.callStart(o.wrappedSlots.where(function(e){return e.slotExistsOnPage}).toList()).then(function(){r.adFuel.moduleManager.callPreQueue(o.wrappedSlots.where(function(e){return e.slotExistsOnPage&&!e.isExcluded}).toList()).then(function(){var e;null!==(e=r.adFuel.logger)&&void 0!==e&&e.info("[runProcessChain] calling first processor..."),r._firstProcessor.process(o).then(function(){o.timestamp=(new Date).getTime(),r.adFuel.processedData.setOrUpdate(o.timestamp,o),r.runProcessChain(),r.adFuel.flushCmdQueue()})})}).catch(function(e){var t;null!==(t=r.adFuel.logger)&&void 0!==t&&t.error("[runProcessChain] There was an error in processing the chain.  Mission Control has aborted liftoff.",e)})):null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("[runProcessChain] No data to process.")},n.prototype.getSlotIfAlreadyProcessed=function(t){var e=null===(e=this.adFuel.processedData.firstOrDefault(function(e){return e.value.wrappedSlots.any(function(e){return e.slotId===t.slotId&&e.isBuilt})}))||void 0===e?void 0:e.value.wrappedSlots.firstOrDefault(function(e){return e.slotId===t.slotId&&e.isBuilt});return t=null!=e?e:t},n.prototype.isReady=function(e){return this._ready.get(e.readyId)},n.prototype.readyToLaunch=function(){var e,t=this._ready.all(function(e){return!0===e.value});return null!==(e=this.adFuel.logger)&&void 0!==e&&e.info("Ready to launch ".concat(t),this._ready),t},n);function n(e,t){this.adFuel=e,this.googleApi=t,this._ready=new o.Dictionary,this.processQueue=[]}r.MissionControl=e},{"linq-collections":23}],37:[function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.ModuleManager=r.ModuleWrapper=void 0;var s=e("@turnercode/digital-ads-utilities"),e=e("../system/AController"),i=function(e,t,r,o){void 0===t&&(t=void 0),void 0===r&&(r=!1),void 0===o&&(o=!1),this.moduleName=e,this.unWrappedModule=t,this.isLoaded=r,this.isReady=o};r.ModuleWrapper=i;var a,n=(a=e.AController,n(l,a),Object.defineProperty(l.prototype,"readyId",{get:function(){return"modules"},enumerable:!1,configurable:!0}),l.prototype.executeWhenPageLoads=function(){var e,t;null!==(e=this.adFuel.perf)&&void 0!==e&&e.addMark("Executing Processes START"),this.adFuel.adFuelOptions.ACTIVE_MODULES?this.areAllExpectedModulesLoaded?(null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Executing Processes END"),null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMeasure("Executing Processes")):null!==(t=this.adFuel.logger)&&void 0!==t&&t.warn("Failed to load all expected modules:",this.adFuel.adFuelOptions.ACTIVE_MODULES):this.adFuel.missionControl.setReady(this)},l.prototype.registerModule=function(e){var t,r;this.adFuel.registeredModules.containsKey(e.MODULE_LOG_TAG)?(r=this.adFuel.registeredModules.get(e.MODULE_LOG_TAG)).unWrappedModule=e:(null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Creating ModuleWrapper [".concat(e.MODULE_NAME,"]")),r=new i(e.MODULE_LOG_TAG,e)),this.adFuel.registeredModules.setOrUpdate(e.MODULE_LOG_TAG,r),this.areAllExpectedModulesLoaded&&this.areAllModulesReady&&(null!==(r=this.adFuel.logger)&&void 0!==r&&r.info("All modules are loaded and ready, so setting ModuleManager ready."),null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("All Modules Ready"),this.missionControl.setReady(this))},Object.defineProperty(l.prototype,"areAllExpectedModulesLoaded",{get:function(){for(var e,t=0,r=null!==(e=this.adFuel.adFuelOptions.ACTIVE_MODULES)&&void 0!==e?e:[];t<r.length;t++){var o=r[t];if(!this.adFuel.registeredModules.containsKey(o))return!1}return!!this.adFuel.adFuelOptions.ACTIVE_MODULES},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"areAllModulesReady",{get:function(){return this.adFuel.registeredModules.count()<1||this.adFuel.registeredModules.all(function(e){return e.value.isReady})},enumerable:!1,configurable:!0}),l.prototype.callStart=function(){var o=this;return new Promise(function(e){o.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(t){var e,r=t.value.unWrappedModule;if(r.start)try{null!==(e=o.adFuel.perf)&&void 0!==e&&e.addMark("Calling Module Start Process [".concat(t.value.moduleName,"]")),r.start()}catch(e){null!==(t=o.adFuel.logger)&&void 0!==t&&t.error("Problem calling start for ".concat(r.MODULE_NAME),e)}}),e()})},l.prototype.callPreQueue=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.preQueue&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module preQueue Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.preQueue(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Problem calling preQueue ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PreQueue timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreQueue Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreQueue Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callPostQueue=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.postQueue&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module postQueue Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.postQueue(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling postQueue ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PostQueue timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostQueue Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostQueue Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callPreDispatch=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.preDispatch&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module preDispatch Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.preDispatch(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling preDispatch ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PreDispatch timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreDispatch Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreDispatch Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callPostDispatch=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.postDispatch&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module postDispatch Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.postDispatch(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling postDispatch ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PostDispatch timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostDispatch Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostDispatch Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callPreRefresh=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.preRefresh&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module preRefresh Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.preRefresh(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling preRefresh ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PreRefresh timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreRefresh Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PreRefreesh Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callPostRefresh=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.postRefresh&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module postRefresh Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.postRefresh(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling postRefresh ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," PostRefresh timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostRefresh Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - PostRefresh Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l.prototype.callDestroySlot=function(r){var i=this;return new Promise(function(e){var t,o=r,n=[];i.adFuel.registeredModules.where(function(e){return e.value.isReady}).forEach(function(e){var t,r=e.value.unWrappedModule;null!=r&&r.destroySlots&&(null!==(t=i.adFuel.perf)&&void 0!==t&&t.addMark("Calling Module destroySlots Process [".concat(e.value.moduleName,"]")),n.push((0,s.promiseWithTimeout)(1500,r.destroySlots(o.toArray()).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("Problem calling destroySlots ".concat(r.MODULE_NAME),e)}),"".concat(r.MODULE_NAME," DestroySlot timed out."))))}),null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - DestroySlot Callback Promises: ",n),e(Promise.allSettled(n).then(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.log("MODULE-MANAGER - DestroySlot Callback Promises Results: ",e)}).catch(function(e){var t;null!==(t=i.adFuel.logger)&&void 0!==t&&t.error("MODULE-MANAGER - Error waiting for all promises to resolve:",e)}))})},l);function l(e){var t=a.call(this,e.missionControl)||this;return t.adFuel=e,t._pageLoaded=!1,window.addEventListener("load",function(){var e;t._pageLoaded?null!==(e=t.adFuel.perf)&&void 0!==e&&e.addMark("Already executed"):(null!==(e=t.adFuel.perf)&&void 0!==e&&e.addMark("window.load"),t.executeWhenPageLoads(),t._pageLoaded=!0)}),t}r.ModuleManager=n},{"../system/AController":31,"@turnercode/digital-ads-utilities":11}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Monetization=void 0;var o=(n.prototype.hasInvalidMapping=function(){var t=this,r=!1;return this.invalidMappings.forEach(function(e){(t.wrappedSlot.slotId.includes(e)||t.posValue.includes(e))&&(r=!0)}),r},n.prototype.hasInvalidUnitSegment=function(){var t=this,r=!1;return this.invalidSegments.forEach(function(e){t.wrappedSlot.slotId.includes(e)&&(r=!0)}),r},n.prototype.hasInvalidAdUnit=function(){return this.invalidAdUnits.includes(this.wrappedSlot.adUnitMap)},n);function n(e){var r=this;this.wrappedSlot=e,this.invalidMappings=["_ns_","_nfs_"],this.invalidSegments=[],this.invalidAdUnits=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"],this.monetizedSizes=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],this.isMonetized=!0,this.filteredSizes=[],this.posValue=e.posMap,"page"===e.slotId&&(this.isMonetized=!1),this.hasInvalidMapping()&&(this.isMonetized=!1),this.hasInvalidUnitSegment()&&(this.isMonetized=!1),this.hasInvalidAdUnit()&&(this.isMonetized=!1),this.isMonetized&&this.monetizedSizes.forEach(function(t){e.sizes.forEach(function(e){e.unwrapped.join("x")===t&&r.filteredSizes.push(e)})}),0===this.filteredSizes.length&&(this.isMonetized=!1)}r.Monetization=o},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsParser=void 0;var u=e("./SlotWrapper"),e=(o.prototype.processOptions=function(e){null!==(t=this.adFuel.perf)&&void 0!==t&&t.addMark("Processing Options"),null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("----slots before processOptions",e.wrappedSlots.select(function(e){return e.toLogging()}).toArray());var t=e.options;null!=t&&t.adUnitMap&&this.processAdUnitMapping(t.adUnitMap,e),null!=t&&t.slotMap&&this.processSlotMapping(t.slotMap,e),null!=t&&t.exclude&&this.processExclusions(t.exclude,e),null!=t&&t.slots&&this.processIncludes(t.slots,e),null!=t&&t.posMap&&this.processPosMapping(t.posMap,e);var r=[];return null!=t&&t.sync?e.wrappedSlots.forEach(function(e){return r.push(e.slotId)}):null!=t&&t.syncSlots&&(Array.isArray(t.syncSlots)||(this.adFuel.adFuelOptions.syncSlots=[t.syncSlots]),r.push.apply(r,t.syncSlots)),e.wrappedSlots.where(function(e){return r.includes(e.slotId)}).forEach(function(e){return e.sync=!0}),null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("----slots after processOptions",e.wrappedSlots.toArray()),e},o.prototype.processAdUnitMapping=function(e,t){var r,o;null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Processing AdUnit Mapping ".concat(JSON.stringify(e),"]")),o="string"==typeof e?JSON.parse(JSON.stringify({all:e})):JSON.parse(JSON.stringify(e)),t.wrappedSlots.forEach(function(e){"undefined"!==o.all?e.adUnitMap=o.all:"undefined"!==o[e.slotId]&&(e.adUnitMap=o[e.slotId])})},o.prototype.processSlotMapping=function(o,n){for(var i,s,a,l=this,e=0,t=Object.keys(o);e<t.length;e++)!function(t){var e,r=null===(i=n.wrappedSlots.firstOrDefault(function(e){return e.slotId===t}))||void 0===i?void 0:i.unWrappedSlot;r?(e=JSON.parse(JSON.stringify(r)),r=n.wrappedSlots.firstOrDefault(function(e){return e.slotId===o[t]}),e.rktr_slot_id=o[t],r?(null!==(s=l.adFuel.logger)&&void 0!==s&&s.log("Mapped ".concat(o[t]," slotWrapper already exists.  Copying registry information.")),r.unWrappedSlot=e):document.getElementById(o[t])?(null!==(s=l.adFuel.logger)&&void 0!==s&&s.log("Creating slot ".concat(o[t]," mapped to ").concat(t)),n.wrappedSlots.push(new u.SlotWrapper(e))):null!==(a=l.adFuel.logger)&&void 0!==a&&a.warn("".concat(o[t]," has no matching element on the page and won't be added to allWrappedSlots.'"))):null!==(a=l.adFuel.logger)&&void 0!==a&&a.warn("Could not find source slot data for ".concat(t," in the registry or allWrappedSlots in processSlotMap."))}(t[e])},o.prototype.processPosMapping=function(o,n){var e,i;if(null!==(e=this.adFuel.perf)&&void 0!==e&&e.addMark("Processing POS Mapping ".concat(JSON.stringify(o),"]")),"string"==typeof o)n.wrappedSlots.forEach(function(e){e.posMap=o});else{var t,s=this;for(t in o)!function(t){var e=n.wrappedSlots.firstOrDefault(function(e){return e.slotId===t}),r=n.wrappedSlots.firstOrDefault(function(e){return e.slotId===o[t]});if(!e)return null!==(i=s.adFuel.logger)&&void 0!==i&&i.warn("Cant' find slot ".concat(t," to use as a source in POS Mapping."));e&&(r?r.posMap=o[t]:((e=JSON.parse(JSON.stringify(e.unWrappedSlot))).rktr_slot_id=o[t],(e=new u.SlotWrapper(e)).posMap=t,n.wrappedSlots.push(e)))}(t)}},o.prototype.processExclusions=function(t,e){var r;null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Processing Exclusions ".concat(JSON.stringify(t),"]")),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("Processing exclusions:",t),(t=!Array.isArray(t)?[t]:t).length<1||(e.wrappedSlots.where(function(e){return!t.includes(e.slotId)}).forEach(function(e){return e.isExcluded=!1}),e.wrappedSlots.where(function(e){return t.includes(e.slotId)}).forEach(function(e){return e.isExcluded=!0}))},o.prototype.processIncludes=function(t,e){var r;null!==(r=this.adFuel.perf)&&void 0!==r&&r.addMark("Processing Slots (inclusions) ".concat(JSON.stringify(t))),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("Processing inclusions:",t),(t=!Array.isArray(t)?[t]:t).length<1||(e.wrappedSlots.where(function(e){return!t.includes(e.slotId)}).forEach(function(e){return e.isExcluded=!0}),e.wrappedSlots.where(function(e){return t.includes(e.slotId)}).forEach(function(e){return e.isExcluded=!1}))},o);function o(e){this.adFuel=e}r.OptionsParser=e},{"./SlotWrapper":43}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OverlayLoader=void 0;var c=e("@turnercode/digital-ads-utilities/dist/localization"),e=(Object.defineProperty(o.prototype,"overlaysHidden",{get:function(){return this._overlaysHidden},enumerable:!1,configurable:!0}),o.prototype._togglePageOverlay=function(){var e,t,l,u;null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("===== OVERLAY LOADER ===== Toggling Page Overlay...",this.overlaysHidden),this.overlaysHidden&&((e=document.createElement("style")).innerHTML="\n        html::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n        html body::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n      ",(t=document.createElement("div")).className="pos_overlay",t.id="page_overlay",t.style.position="fixed",t.style.bottom="0",t.style.left="10",t.style.textAlign="left",t.style.padding="5px",t.style.marginBottom="25px",t.style.fontFamily="Verdana",t.style.fontSize="12px",t.style.fontWeight="normal",t.style.lineHeight="12px",t.style.background="rgba(0,50,100,0.7)",t.style.color="#ffffff",t.style.zIndex="2147483000",t.style.overflow="hidden",t.style.overflowY="auto",t.style.overflowX="auto",t.style.width="500px",t.style.height="30vh",(l=document.createElement("ul")).style.listStyleType="none",l.style.margin="0px",l.style.marginTop="5px",l.style.marginBottom="5px",l.style.padding="5px",l.innerHTML=l.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; align: right; text-align: right; display: inline-block;"><a style="cursor: copy; color: white;" onClick="copyPageInfo()">[COPY]</a></div>',u=this.adFuel,["afv","uc","mv","reg"].forEach(function(e){var t,o=document.createElement("li");o.style.margin="5px",o.style.padding="0px";var r=u.version(),n=u.registeredModules.getKeys(),i=u.fetchedRegistries.keys();null!==(t=u.logger)&&void 0!==t&&t.log("Version: ",r),null!==(t=u.logger)&&void 0!==t&&t.log("Modules: ",n),null!==(t=u.logger)&&void 0!==t&&t.log("Registries: ",i);var s=u.consent.getUserConsentRegion||"N/A",a="N/A"===s?"N/A":u.consent.getConsent([]);switch(null!==(t=u.logger)&&void 0!==t&&t.log("Consent Region: -".concat(s,"-")),null!==(t=u.logger)&&void 0!==t&&t.log("Consent Status: ",a),o.style.direction="ltr",e){case"afv":o.innerHTML='<b style="font-size: 1.25em;">AdFuel v'.concat(r,"</b>");break;case"mv":o.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>DLC:</b>',o.innerHTML=o.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',n.forEach(function(e){var t=u.registeredModules.get(e);o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px;">'.concat(null===(e=t.unWrappedModule)||void 0===e?void 0:e.MODULE_NAME," v").concat(null===(t=t.unWrappedModule)||void 0===t?void 0:t.MODULE_VERSION,"</li>")}),o.innerHTML=o.innerHTML+"</ul>";break;case"reg":o.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Community-Created Content:</b>',o.innerHTML=o.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',Array.from(i).forEach(function(e){var t=u.fetchedRegistries.get(e),r=null;t&&(r=t[0]),o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Name:</b> '.concat(null==r?void 0:r.rktr_id,"</li>"),o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Website:</b> <a style="color: yellow;" href="'.concat(e,'" target="_blank">').concat(e,"</a></li>"),o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px; padding-bottom: 5px; border-bottom: solid 1px white;"><b>Last Updated:</b> '.concat(null==r?void 0:r.rktr_deployed_date,"<br /></li>")}),o.innerHTML=o.innerHTML+"</ul>";break;case"uc":o.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>User Consent:</b>',o.innerHTML=o.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Region:</b> '.concat(s.toUpperCase(),"</li>"),o.innerHTML=o.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Status:</b> '.concat(a?"Granted":"Denied","</li>"),o.innerHTML=o.innerHTML+"</ul>"}l.appendChild(o)}),t.appendChild(l),window.copyPageInfo=function(){var e=null===(e=document.getElementById("page_overlay"))||void 0===e?void 0:e.innerText.replace("[COPY]","");return console.log("Overlay Text: ",e),navigator.clipboard.writeText(e||""),e},this.showTemporalData(t),document.head.appendChild(e),document.body.appendChild(t))},o.prototype._toggleOverlays=function(){var e,t,d=this;if(this._overlaysHidden){null!==(e=this.adFuel.logger)&&void 0!==e&&e.log("===== OVERLAY LOADER ===== Showing Overlays..."),this._togglePageOverlay();var r=document.querySelectorAll(".adfuel-rendered");null!==(e=this.adFuel.logger)&&void 0!==e&&e.log("===== OVERLAY LOADER ===== Ad Slots:",r),n=r.length,r.forEach(function(e){var s=e.id,t=document.getElementById(s)||document.createElement("div");t.style.position="relative";var r=null===(o=d.adFuel)||void 0===o?void 0:o.processedData,o=r.getKeys(),a={};o.forEach(function(e){var t=r.get(e);null!==(e=d.adFuel.logger)&&void 0!==e&&e.log("===== OVERLAY LOADER ===== Registry:",t),t.wrappedSlots.forEach(function(e){e.unWrappedSlot.rktr_slot_id===s&&e.isBuilt&&e.gSlot&&((a=e).parentRegistry=t.url)})}),null!==(o=d.adFuel.logger)&&void 0!==o&&o.log("===== OVERLAY LOADER ===== data: ",{processedData:r,adElement:e,adFuel:Object.keys(d.adFuel),activeSlot:a});var l=s.substring(s.indexOf("_")+1),e=document.createElement("div");e.className="pos_overlay",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.textAlign="left",e.style.padding="5px",e.style.fontFamily="Verdana",e.style.fontSize="12px",e.style.fontWeight="normal",e.style.lineHeight="12px",e.style.background="rgba(0,100,0,0.7)",e.style.color="#ffffff",e.style.zIndex="2147483000",e.style.resize="both",e.style.overflow="hidden",e.style.overflowY="auto",e.style.overflowX="auto",e.style.width=t.style.width+"px",e.style.height=t.style.height+"px",e.id="overlay_"+s;var u=document.createElement("ul");u.style.listStyleType="none",u.style.margin="0px",u.style.marginTop="5px",u.style.marginBottom="5px",u.style.padding="5px";u.innerHTML=u.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; display: inline-block; align: right; text-align: right"><a style="cursor: copy; color: white;" onClick="copySlotInfo(\''.concat(s,"')\">[COPY]</a></div>"),["Slot","Details","Response","Programmatic","Bids","Targeting"].forEach(function(e){function o(e){return'<ul style="list-style-type: none; margin: 0px; margin-left: '.concat(e,'px; padding-top: 2px; padding-bottom: 2px;">')}function n(e){return'<li style="direction: ltr; margin-left: '.concat(e,'px; padding: 0px;">')}switch(u.innerHTML=u.innerHTML+n(5),e){case"Slot":u.innerHTML=u.innerHTML+'<b style="font-size: 1.25em;">NPC: '.concat(s,"</b>");break;case"Details":u.innerHTML=u.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Details:</b>',u.innerHTML=u.innerHTML+o(10),u.innerHTML=u.innerHTML+n(10)+"<b>POS:</b> "+l+"</li>",u.innerHTML=u.innerHTML+n(10)+"<b>AdUnit:</b> "+((null==a?void 0:a.adUnitMap)||(null==a?void 0:a.unWrappedSlot.rktr_ad_id))+"</li>",u.innerHTML=u.innerHTML+n(10)+"<b>Registry:</b> "+(null==a?void 0:a.parentRegistry)+"</li>",u.innerHTML=u.innerHTML+n(10)+"<b>Monetized:</b> "+(a&&a.monetization?a.monetization.isMonetized:"false")+"</li>",u.innerHTML=u.innerHTML+"</ul>";break;case"Response":u.innerHTML=u.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Response:</b>',u.innerHTML=u.innerHTML+o(10);var t,r=a.responseData;if(r)for(var i in r)"renderedSize"===i||null!==(t=r[i])&&(u.innerHTML=u.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>'.concat(i,":</b> ").concat(JSON.stringify(t),"</li>"));u.innerHTML=u.innerHTML+n(10)+"<b>Rendered Size:</b> ".concat("string"!=typeof a.responseData.renderedSize?a.responseData.renderedSize.join("x"):a.responseData.renderedSize,"</li>"),u.innerHTML=u.innerHTML+"</ul>";break;case"Programmatic":u.innerHTML=u.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Programmatic:</b>',u.innerHTML=u.innerHTML+o(10),Object.keys(a.programmatic).forEach(function(e){var t,r;switch(u.innerHTML=u.innerHTML+n(10),e){case"a9":null!==(t=d.adFuel.logger)&&void 0!==t&&t.log("===== OVERLAY LOADER ===== A9: ",a.programmatic.a9),u.innerHTML=u.innerHTML+"<b>A9:</b> ",u.innerHTML=u.innerHTML+o(15),u.innerHTML=u.innerHTML+n(15)+"<b>SlotName:</b> "+a.programmatic.a9.slotName+"</li>",u.innerHTML=u.innerHTML+"</ul>";break;case"ias":null!==(t=d.adFuel.logger)&&void 0!==t&&t.log("===== OVERLAY LOADER ===== IAS: ",a.programmatic.ias),u.innerHTML=u.innerHTML+"<b>IAS:</b> ",u.innerHTML=u.innerHTML+o(15),u.innerHTML=u.innerHTML+n(15)+"<b>adUnitPath:</b> "+a.programmatic.ias.adUnitPath+"</li>",u.innerHTML=u.innerHTML+"</ul>";break;case"krux":null!==(r=d.adFuel.logger)&&void 0!==r&&r.log("===== OVERLAY LOADER ===== Krux: ",a.programmatic.krux),u.innerHTML=u.innerHTML+"<b>Krux:</b> ",u.innerHTML=u.innerHTML+o(15),u.innerHTML=u.innerHTML+n(15)+"<b>controlTag:</b> "+((0,c.isIntl)()?a.programmatic.krux.intl_controltag:a.programmatic.krux.dom_controltag)+"</li>",u.innerHTML=u.innerHTML+"</ul>";break;case"prebid":null!==(r=d.adFuel.logger)&&void 0!==r&&r.log("===== OVERLAY LOADER ===== Prebid: ",a.programmatic.prebid),u.innerHTML=u.innerHTML+"<b>Prebid:</b> ",u.innerHTML=u.innerHTML+o(15),Object.keys(a.programmatic.prebid).forEach(function(r){"bids"!==r&&(u.innerHTML=u.innerHTML+n(15)+"<b>".concat(r.toUpperCase(),":</b><br />"),u.innerHTML=u.innerHTML+o(20),Object.keys(a.programmatic.prebid[r]).forEach(function(e){var t="keywords"!==e?a.programmatic.prebid[r][e]:JSON.stringify(a.programmatic.prebid[r][e]);u.innerHTML=u.innerHTML+n(20)+"<b>".concat(e,":</b> ").concat(t,"</li>")}),u.innerHTML=u.innerHTML+"</ul>",u.innerHTML=u.innerHTML+"</li>")}),u.innerHTML=u.innerHTML+"</ul>"}u.innerHTML=u.innerHTML+"</li>"}),u.innerHTML=u.innerHTML+"</ul>";break;case"Targeting":u.innerHTML=u.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Targeting:</b>',u.innerHTML=u.innerHTML+o(10),Object.keys(a.requestedSlotTargets).forEach(function(e){0<a.requestedSlotTargets[e].length?u.innerHTML=u.innerHTML+n(10)+"<b>".concat(e,":</b> ").concat(JSON.stringify(a.requestedSlotTargets[e].join(", ")),"</li>"):null!==(e=d.adFuel.logger)&&void 0!==e&&e.log("===== OVERLAY LOADER ===== No Slot Targets [".concat(a.slotId,"]"))}),u.innerHTML=u.innerHTML+"</ul>"}u.innerHTML=u.innerHTML+"</li>"}),window.copySlotInfo=function(e){e=null===(e=document.getElementById("overlay_"+e))||void 0===e?void 0:e.innerText.replace("[COPY]","");return console.log("Overlay Text: ",e),navigator.clipboard.writeText(e||""),e},e.appendChild(u),t.appendChild(e)}),this._overlaysHidden=!1}else{null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("===== OVERLAY LOADER ===== Removing Overlays...");for(var o=document.querySelectorAll(".pos_overlay"),n=o.length,i=0;i<n;i++)null!==(t=o[i].parentNode)&&void 0!==t&&t.removeChild(o[i]);this._overlaysHidden=!0}},o.prototype.startConsoleTool=function(){var t,r=this;try{document.addEventListener("keydown",function(e){e.isComposing||229===e.keyCode||"229"===e.code||"KeyZ"===e.code&&e.ctrlKey&&e.shiftKey&&r._toggleOverlays()})}catch(e){null!==(t=this.adFuel.logger)&&void 0!==t&&t.log("Error Starting Console Tool: ",e)}},o.prototype.getTemporalData=function(){var r=[];return performance.getEntries().forEach(function(t,e){0===e?["connectEnd","connectStart","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive","domainLookupStart","domainLookupEnd","fetchStart","loadEventEnd","loadEventStart","requestStart","responseStart","responseEnd"].forEach(function(e){1!==t[e]&&r.push({name:e,startTime:t[e],duration:0,entryType:"navigation"})}):(0<=t.name.indexOf("ADFUEL")||0<=["gpt-tag-load","gpt-first-ad-request","gpt-first-ad-render"].indexOf(t.name))&&r.push(t)}),r.sort(function(e,t){return e.startTime>t.startTime?1:e.startTime<t.startTime?-1:0}),r},o.prototype.showTemporalData=function(e){var t=document.createElement("div");t.style.textAlign="left",t.innerHTML="<b>Performance Data:</b>";var r=this.getTemporalData(),n=["name","entryType","startTime","duration"],o=document.createElement("table");o.border="1",o.style.width="100%";var i=document.createElement("thead"),s=document.createElement("tr");i.appendChild(s),n.forEach(function(e){var t=document.createElement("td");t.innerHTML=e.toUpperCase(),t.style.padding="5px",t.style.paddingLeft="5px",t.style.paddingRight="5px",t.style.fontSize="1em",t.style.fontWeight="bolder",t.style.textAlign="center",s.appendChild(t)});var a=document.createElement("tbody");r.forEach(function(r){var o=document.createElement("tr");o.style.padding="15px",n.forEach(function(e){var t=document.createElement("td");switch(e){case"name":t.innerHTML=r[e].replace("[ADFUEL TS] ","");break;case"startTime":case"duration":t.innerHTML=parseFloat(r[e]).toFixed(4);break;default:t.innerHTML=r[e]}t.style.padding="2px",t.style.paddingLeft="5px",t.style.paddingRight="5px",t.style.fontSize=".8em",t.style.fontWeight="normal",o.appendChild(t)}),a.appendChild(o)}),o.appendChild(i),o.appendChild(a),t.appendChild(o),e.appendChild(t)},o);function o(e){this.adFuel=e,this._overlaysHidden=!0}r.OverlayLoader=e},{"@turnercode/digital-ads-utilities/dist/localization":13}],41:[function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=this&&this.__awaiter||function(e,s,a,l){return new(a=a||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,n)}i((l=l.apply(e,s||[])).next())})},u=this&&this.__generator||function(r,o){var n,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(r,a)}catch(e){t=[6,e],i=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryLoader=void 0;var i,s=e("./AController"),d=e("@turnercode/digital-ads-utilities"),c=e("linq-collections"),p=e("../system"),g=e("."),a=e("./OptionsParser"),n=(i=s.AController,n(h,i),Object.defineProperty(h.prototype,"readyId",{get:function(){return"registry"},enumerable:!1,configurable:!0}),h.prototype.loadRegistryFromUrl=function(o,n){var i,s,a;return l(this,void 0,void 0,function(){var t,r=this;return u(this,function(e){return null!==(i=this.adFuel.logger)&&void 0!==i&&i.info("Loading registry JSON from ".concat(o)),"string"!=typeof o?null!==(s=this.adFuel.logger)&&void 0!==s&&s.log("loadRegistryFromUrl was given a Url value that wasn't a string.",console.trace()):("js"===o.slice(2+(o.lastIndexOf(".")-1>>>0))&&((t=o.split(".")).pop(),o="".concat(t.filter(function(e){return"min"!==e.toLowerCase()}).join("."),".json")),o=(0,d.normalizeUrl)(o),null!==(s=this.adFuel.logger)&&void 0!==s&&s.log("Looking for Registry JSON: ",o),this.fetchedRegistries.has(o)?(null!==(a=this.adFuel.logger)&&void 0!==a&&a.log("Fetching Registry object from Cache"),t=this.fetchedRegistries.get(o),this.loadRegistryFromJson(t,n,o)):(null!==(a=this.adFuel.logger)&&void 0!==a&&a.log("Fetching Registry JSON from CDN"),null!==(a=this.adFuel.perf)&&void 0!==a&&a.addMark("Loading Registry JSON START"),fetch(o).then(function(e){return e.json()}).then(function(e){return r.fetchedRegistries.set(o,JSON.parse(JSON.stringify(e.registry))),e.registry}).then(function(e){var t;null!==(t=r.adFuel.perf)&&void 0!==t&&t.addMark("Loading Registry JSON END"),null!==(t=r.adFuel.perf)&&void 0!==t&&t.addMeasure("Loading Registry JSON"),r.loadRegistryFromJson(e,n,o)}).catch(function(e){var t;throw null!==(t=r.adFuel.logger)&&void 0!==t&&t.error("Error loading ".concat(o),e),Error(e)}))),[2]})})},h.prototype.loadRegistryFromJson=function(e,t,r){var o;null!==(s=this.adFuel.perf)&&void 0!==s&&s.addMark("Processing Registry [".concat(e[0].rktr_id,"]")),r=r||"".concat(e[0].rktr_id);var n=new c.List,i=e[0];i.slots=[],null!==(s=this.adFuel.logger)&&void 0!==s&&s.log("===== [RegistryLoader/loadRegistryFromJson] Options: ",t);for(var s,a=1;a<e.length;a++)i.slots.push(e[a]),t.slots&&0!==t.slots.length?0<=t.slots.indexOf(e[a].rktr_slot_id)&&(null!==(o=this.adFuel.logger)&&void 0!==o&&o.log("===== [RegistryLoader/loadRegistryFromJson] Selective Slot: ",e[a]),n.push(new p.SlotWrapper(e[a]))):(null!==(o=this.adFuel.logger)&&void 0!==o&&o.log("===== [RegistryLoader/loadRegistryFromJson] All Slots: ",e[a]),n.push(new p.SlotWrapper(e[a])));s=(new g.GptProcessData).build(i,n,t,r),null!==(r=this.adFuel.logger)&&void 0!==r&&r.log("data variable in loadRegistryfromJson",s),this.loadRegistryFromObject(s)},h.prototype.loadRegistryFromObject=function(e){var t;e=new a.OptionsParser(this.adFuel).processOptions(e),null!==(t=this.adFuel.logger)&&void 0!==t&&t.info("GptProcessDataObject for processing",e),this.adFuel.missionControl.processQueue.push(e),this.missionControl.setReady(this)},h);function h(e){var t=i.call(this,e.missionControl)||this;return t.adFuel=e,t.fetchedRegistries=new Map,t}r.RegistryLoader=n},{".":45,"../system":45,"./AController":31,"./OptionsParser":39,"@turnercode/digital-ads-utilities":11,"linq-collections":23}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SizeWrapper=void 0;var o=(Object.defineProperty(n.prototype,"width",{get:function(){return+this.unwrapped[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return+this.unwrapped[1]},enumerable:!1,configurable:!0}),n);function n(e){this.unwrapped=e}r.SizeWrapper=o},{}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SlotWrapper=void 0;var d=e("./Monetization"),c=e("./SizeWrapper"),p=e("./ViewportWrapper"),e=(o.prototype.formatResponsiveMapping=function(e){return e.responsive.map(function(e){return e.map(function(e){return"suppress"===e[0]?[]:e.map(function(e){return Array.isArray(e)?e.map(function(e){return"string"!=typeof e||"fluid"===e?e:parseInt(e,10)}):"string"==typeof e?parseInt(e,10):e})})})},Object.defineProperty(o.prototype,"slotId",{get:function(){return this.unWrappedSlot.rktr_slot_id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sync",{get:function(){return this._sync},set:function(e){this._sync=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isOutOfPage",{get:function(){return 1<=this.unWrappedSlot.rktr_slot_id.indexOf("_oop")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isBuilt",{get:function(){return!!this._gslot},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isExcluded",{get:function(){return this._isExcluded},set:function(e){this._isExcluded=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasBeenDisplayed",{get:function(){return this._hasBeenDisplayed},set:function(e){this._hasBeenDisplayed=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"slotExistsOnPage",{get:function(){return!!document.getElementById(this.slotId)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gSlot",{get:function(){return this._gslot},set:function(e){this._gslot=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"monetization",{get:function(){return this._monetization},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parentRegistry",{get:function(){return this._parentRegistry},set:function(e){this._parentRegistry=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"adUnitMap",{get:function(){return this._adUnitMap},set:function(e){this._adUnitMap=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"posMap",{get:function(){return this._posMap||""},set:function(e){this._posMap=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"targeting",{get:function(){return this.unWrappedSlot.targeting},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"responsive",{get:function(){return this._responsive},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizes",{get:function(){return this._sizes},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"requestedSlotTargets",{get:function(){return this._requestedSlotTargets},set:function(e){this._requestedSlotTargets=e},enumerable:!1,configurable:!0}),o.prototype.toLogging=function(){return{slotId:this.slotId,isExcluded:this.isExcluded,isBuilt:this.isBuilt,hasBeenDisplayed:this.hasBeenDisplayed,slotExistsOnPage:this.slotExistsOnPage,isOOP:this.isOutOfPage}},o);function o(e){this.unWrappedSlot=e,this._sync=!1,this._isExcluded=!1,this._hasBeenDisplayed=!1,this._gslot=void 0,this._monetization={isMonetized:!1,filteredSizes:[]},this._adUnitMap="",this._parentRegistry="",this._responsive=[],this._sizes=[],this._requestedSlotTargets={},this._posMap="",this.programmatic={},this.responseData={advertiserId:void 0,campaignId:void 0,creativeId:void 0,isEmpty:!0,lineItemId:void 0,renderedSize:"",sourceAgnosticCreativeId:void 0,sourceAgnosticLineItemId:void 0},this._adUnitMap=e.rktr_ad_id,this._posMap="";for(var t=0,r=this.targeting;t<r.length;t++){var o=r[t];if("pos"===o[0]){this._posMap=o[1][0];break}}this.unWrappedSlot.responsive=this.formatResponsiveMapping(e);for(var n=0,i=this.unWrappedSlot.responsive;n<i.length;n++){var s=i[n];this._responsive.push(new p.ViewportWrapper(s))}for(var a=0,l=this.unWrappedSlot.sizes;a<l.length;a++){var u=l[a];this._sizes.push(new c.SizeWrapper(u))}this._monetization=new d.Monetization(this),this._parentRegistry=""}r.SlotWrapper=e},{"./Monetization":38,"./SizeWrapper":42,"./ViewportWrapper":44}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewportWrapper=void 0;var n=e("./SizeWrapper"),e=(Object.defineProperty(o.prototype,"viewport",{get:function(){return new n.SizeWrapper(this.unwrapped[0])},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizes",{get:function(){for(var e={sizes:[],suppressed:!1},t=0,r=this.unwrapped[1];t<r.length;t++){var o=r[t];Array.isArray(o)?e.sizes.push(new n.SizeWrapper(o)):e.suppressed=!0}return e},enumerable:!1,configurable:!0}),o);function o(e){this.unwrapped=e}r.ViewportWrapper=e},{"./SizeWrapper":42}],45:[function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.processors=void 0,r.processors=e("../processors/index"),n(e("./MissionControl"),r),n(e("./SlotWrapper"),r),n(e("./ViewportWrapper"),r),n(e("./SizeWrapper"),r),n(e("./GoogleApi"),r),n(e("./GptProcessData"),r),n(e("./RegistryLoader"),r),n(e("./ModuleManager"),r),n(e("./GptScriptLoader"),r),n(e("./OverlayLoader"),r),n(e("./BaseAdFuelOptions"),r)},{"../processors/index":30,"./BaseAdFuelOptions":32,"./GoogleApi":33,"./GptProcessData":34,"./GptScriptLoader":35,"./MissionControl":36,"./ModuleManager":37,"./OverlayLoader":40,"./RegistryLoader":41,"./SizeWrapper":42,"./SlotWrapper":43,"./ViewportWrapper":44}]},{},[25])(25)});